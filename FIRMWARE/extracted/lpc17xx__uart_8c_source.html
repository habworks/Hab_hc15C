<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LPC1700CMSIS Standard Peripheral Firmware Library Manual: C:/nxpdrv/LPC1700CMSIS/Drivers/source/lpc17xx_uart.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>C:/nxpdrv/LPC1700CMSIS/Drivers/source/lpc17xx_uart.c</h1><a href="lpc17xx__uart_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* $Id$          lpc17xx_uart.c                  2011-06-06</span>
<a name="l00003"></a>00003 <span class="comment">*/</span>
<a name="l00027"></a>00027 <span class="comment">/* Peripheral group ----------------------------------------------------------- */</span>
<a name="l00032"></a>00032 <span class="comment">/* Includes ------------------------------------------------------------------- */</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="lpc17xx__uart_8h.html" title="Contains all macro definitions and function prototypes support for UART firmware...">lpc17xx_uart.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="lpc17xx__clkpwr_8h.html" title="Contains all macro definitions and function prototypes support for Clock and Power...">lpc17xx_clkpwr.h</a>"</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">/* If this source file built with example, the LPC17xx FW library configuration</span>
<a name="l00037"></a>00037 <span class="comment"> * file in each example directory ("lpc17xx_libcfg.h") must be included,</span>
<a name="l00038"></a>00038 <span class="comment"> * otherwise the default FW library configuration file must be included instead</span>
<a name="l00039"></a>00039 <span class="comment"> */</span>
<a name="l00040"></a>00040 <span class="preprocessor">#ifdef __BUILD_WITH_EXAMPLE__</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#include "lpc17xx_libcfg.h"</span>
<a name="l00042"></a>00042 <span class="preprocessor">#else</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="lpc17xx__libcfg__default_8h.html" title="Default Library configuration header file.">lpc17xx_libcfg_default.h</a>"</span>
<a name="l00044"></a>00044 <span class="preprocessor">#endif </span><span class="comment">/* __BUILD_WITH_EXAMPLE__ */</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifdef _UART</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 <span class="comment">/* Private Functions ---------------------------------------------------------- */</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">static</span> <a class="code" href="group___l_p_c___types___public___types.html#g67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> uart_set_divisors(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, uint32_t baudrate);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">/*********************************************************************/</span>
<a name="l00066"></a>00066 <span class="keyword">static</span> <a class="code" href="group___l_p_c___types___public___types.html#g67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> uart_set_divisors(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, uint32_t baudrate)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068         <a class="code" href="group___l_p_c___types___public___types.html#g67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> errorStatus = <a class="code" href="group___l_p_c___types___public___types.html#gg67a0db04d321a74b7e7fcfd3f1a3f70b2fd6f336d08340583bd620a7f5694c90">ERROR</a>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070         uint32_t uClk;
<a name="l00071"></a>00071         uint32_t d, m, bestd, bestm, tmp;
<a name="l00072"></a>00072         uint64_t best_divisor, divisor;
<a name="l00073"></a>00073         uint32_t current_error, best_error;
<a name="l00074"></a>00074         uint32_t recalcbaud;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076         <span class="comment">/* get UART block clock */</span>
<a name="l00077"></a>00077         <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#g6ba29f0f9b8af2f72e303533185bcc82">LPC_UART0</a>)
<a name="l00078"></a>00078         {
<a name="l00079"></a>00079                 uClk = <a class="code" href="group___c_l_k_p_w_r___public___functions.html#g1eea2e1c8aac99147b88d5c18928ffa8" title="Get current value of each Peripheral Clock.">CLKPWR_GetPCLK</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#gb55e1cb2751a05bac54292939ce3937b">CLKPWR_PCLKSEL_UART0</a>);
<a name="l00080"></a>00080         }
<a name="l00081"></a>00081         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UARTx == (<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *)<a class="code" href="group___l_p_c17xx___system.html#g83ea0dab4dcb7411c2e1de20050a4d2d">LPC_UART1</a>)
<a name="l00082"></a>00082         {
<a name="l00083"></a>00083                 uClk = <a class="code" href="group___c_l_k_p_w_r___public___functions.html#g1eea2e1c8aac99147b88d5c18928ffa8" title="Get current value of each Peripheral Clock.">CLKPWR_GetPCLK</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#g1e565a2eb1621b007b3f11725637474d">CLKPWR_PCLKSEL_UART1</a>);
<a name="l00084"></a>00084         }
<a name="l00085"></a>00085         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#gc8badf231948fc9216d416c71a34e924">LPC_UART2</a>)
<a name="l00086"></a>00086         {
<a name="l00087"></a>00087                 uClk = <a class="code" href="group___c_l_k_p_w_r___public___functions.html#g1eea2e1c8aac99147b88d5c18928ffa8" title="Get current value of each Peripheral Clock.">CLKPWR_GetPCLK</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#g2b7eb179fdd09c99ddadac8c4d144142">CLKPWR_PCLKSEL_UART2</a>);
<a name="l00088"></a>00088         }
<a name="l00089"></a>00089         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#g61c2bf57d66b50108cdec6878f9e8ee5">LPC_UART3</a>)
<a name="l00090"></a>00090         {
<a name="l00091"></a>00091                 uClk = <a class="code" href="group___c_l_k_p_w_r___public___functions.html#g1eea2e1c8aac99147b88d5c18928ffa8" title="Get current value of each Peripheral Clock.">CLKPWR_GetPCLK</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#g47e9c387422d28ed7d667b7a4abd9096">CLKPWR_PCLKSEL_UART3</a>);
<a name="l00092"></a>00092         }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         uClk = uClk &gt;&gt; 4; <span class="comment">/* div by 16 */</span>
<a name="l00096"></a>00096         <span class="comment">/* In the Uart IP block, baud rate is calculated using FDR and DLL-DLM registers</span>
<a name="l00097"></a>00097 <span class="comment">        * The formula is :</span>
<a name="l00098"></a>00098 <span class="comment">        * BaudRate= uClk * (mulFracDiv/(mulFracDiv+dividerAddFracDiv) / (16 * (DLL)</span>
<a name="l00099"></a>00099 <span class="comment">        * It involves floating point calculations. That's the reason the formulae are adjusted with</span>
<a name="l00100"></a>00100 <span class="comment">        * Multiply and divide method.*/</span>
<a name="l00101"></a>00101         <span class="comment">/* The value of mulFracDiv and dividerAddFracDiv should comply to the following expressions:</span>
<a name="l00102"></a>00102 <span class="comment">        * 0 &lt; mulFracDiv &lt;= 15, 0 &lt;= dividerAddFracDiv &lt;= 15 */</span>
<a name="l00103"></a>00103         best_error = 0xFFFFFFFF; <span class="comment">/* Worst case */</span>
<a name="l00104"></a>00104         bestd = 0;
<a name="l00105"></a>00105         bestm = 0;
<a name="l00106"></a>00106         best_divisor = 0;
<a name="l00107"></a>00107         <span class="keywordflow">for</span> (m = 1 ; m &lt;= 15 ;m++)
<a name="l00108"></a>00108         {
<a name="l00109"></a>00109                 <span class="keywordflow">for</span> (d = 0 ; d &lt; m ; d++)
<a name="l00110"></a>00110                 {
<a name="l00111"></a>00111                   divisor = ((uint64_t)uClk&lt;&lt;28)*m/(baudrate*(m+d));
<a name="l00112"></a>00112                   current_error = divisor &amp; 0xFFFFFFFF;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114                   tmp = divisor&gt;&gt;32;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116                   <span class="comment">/* Adjust error */</span>
<a name="l00117"></a>00117                   <span class="keywordflow">if</span>(current_error &gt; ((uint32_t)1&lt;&lt;31)){
<a name="l00118"></a>00118                         current_error = -current_error;
<a name="l00119"></a>00119                         tmp++;
<a name="l00120"></a>00120                         }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122                   <span class="keywordflow">if</span>(tmp&lt;1 || tmp&gt;65536) <span class="comment">/* Out of range */</span>
<a name="l00123"></a>00123                   <span class="keywordflow">continue</span>;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125                   <span class="keywordflow">if</span>( current_error &lt; best_error){
<a name="l00126"></a>00126                         best_error = current_error;
<a name="l00127"></a>00127                         best_divisor = tmp;
<a name="l00128"></a>00128                         bestd = d;
<a name="l00129"></a>00129                         bestm = m;
<a name="l00130"></a>00130                         <span class="keywordflow">if</span>(best_error == 0) <span class="keywordflow">break</span>;
<a name="l00131"></a>00131                         }
<a name="l00132"></a>00132                 } <span class="comment">/* end of inner for loop */</span>
<a name="l00133"></a>00133 
<a name="l00134"></a>00134                 <span class="keywordflow">if</span> (best_error == 0)
<a name="l00135"></a>00135                   <span class="keywordflow">break</span>;
<a name="l00136"></a>00136         } <span class="comment">/* end of outer for loop  */</span>
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         <span class="keywordflow">if</span>(best_divisor == 0) <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gg67a0db04d321a74b7e7fcfd3f1a3f70b2fd6f336d08340583bd620a7f5694c90">ERROR</a>; <span class="comment">/* can not find best match */</span>
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         recalcbaud = (uClk&gt;&gt;4) * bestm/(best_divisor * (bestm + bestd));
<a name="l00141"></a>00141 
<a name="l00142"></a>00142         <span class="comment">/* reuse best_error to evaluate baud error*/</span>
<a name="l00143"></a>00143         <span class="keywordflow">if</span>(baudrate&gt;recalcbaud) best_error = baudrate - recalcbaud;
<a name="l00144"></a>00144         <span class="keywordflow">else</span> best_error = recalcbaud -baudrate;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         best_error = best_error * 100 / baudrate;
<a name="l00147"></a>00147 
<a name="l00148"></a>00148         <span class="keywordflow">if</span> (best_error &lt; <a class="code" href="group___u_a_r_t___private___macros.html#g3b318954fbe283fa5da4dad6990b0b20">UART_ACCEPTED_BAUDRATE_ERROR</a>)
<a name="l00149"></a>00149                 {
<a name="l00150"></a>00150                         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00151"></a>00151                         {
<a name="l00152"></a>00152                                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR |= <a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>;
<a name="l00153"></a>00153                                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*DLIER.*/</span>DLM = <a class="code" href="group___u_a_r_t___private___macros.html#gc53f4cc36f13edd3fdf7fd9bab1360e2">UART_LOAD_DLM</a>(best_divisor);
<a name="l00154"></a>00154                                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*RBTHDLR.*/</span>DLL = <a class="code" href="group___u_a_r_t___private___macros.html#g55a89461d99a43769772276e51a6710a">UART_LOAD_DLL</a>(best_divisor);
<a name="l00155"></a>00155                                 <span class="comment">/* Then reset DLAB bit */</span>
<a name="l00156"></a>00156                                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR &amp;= (~<a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>;
<a name="l00157"></a>00157                                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;FDR = (<a class="code" href="group___u_a_r_t___private___macros.html#g728a262cba31ffd0d7b4fb172f6dead7">UART_FDR_MULVAL</a>(bestm) \
<a name="l00158"></a>00158                                                 | <a class="code" href="group___u_a_r_t___private___macros.html#g08ae53568f606c894a5ffd764cef6171">UART_FDR_DIVADDVAL</a>(bestd)) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g61a8f74c3fc22574793c6218b90fec50">UART_FDR_BITMASK</a>;
<a name="l00159"></a>00159                         }
<a name="l00160"></a>00160                         <span class="keywordflow">else</span>
<a name="l00161"></a>00161                         {
<a name="l00162"></a>00162                                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>;
<a name="l00163"></a>00163                                 UARTx-&gt;<span class="comment">/*DLIER.*/</span><a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#47c5741e71400b5fb574b7a9e109accc">DLM</a> = <a class="code" href="group___u_a_r_t___private___macros.html#gc53f4cc36f13edd3fdf7fd9bab1360e2">UART_LOAD_DLM</a>(best_divisor);
<a name="l00164"></a>00164                                 UARTx-&gt;<span class="comment">/*RBTHDLR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#39198746ce75689ff1e0324d8e28afe5">DLL</a> = <a class="code" href="group___u_a_r_t___private___macros.html#g55a89461d99a43769772276e51a6710a">UART_LOAD_DLL</a>(best_divisor);
<a name="l00165"></a>00165                                 <span class="comment">/* Then reset DLAB bit */</span>
<a name="l00166"></a>00166                                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> &amp;= (~<a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>;
<a name="l00167"></a>00167                                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#b1424661e47cf560fc294bef93964180">FDR</a> = (<a class="code" href="group___u_a_r_t___private___macros.html#g728a262cba31ffd0d7b4fb172f6dead7">UART_FDR_MULVAL</a>(bestm) \
<a name="l00168"></a>00168                                                 | <a class="code" href="group___u_a_r_t___private___macros.html#g08ae53568f606c894a5ffd764cef6171">UART_FDR_DIVADDVAL</a>(bestd)) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g61a8f74c3fc22574793c6218b90fec50">UART_FDR_BITMASK</a>;
<a name="l00169"></a>00169                         }
<a name="l00170"></a>00170                         errorStatus = <a class="code" href="group___l_p_c___types___public___types.html#gg67a0db04d321a74b7e7fcfd3f1a3f70bc7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;
<a name="l00171"></a>00171                 }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173                 <span class="keywordflow">return</span> errorStatus;
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="comment">/* End of Private Functions ---------------------------------------------------- */</span>
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="comment">/* Public Functions ----------------------------------------------------------- */</span>
<a name="l00183"></a>00183 <span class="comment">/* UART Init/DeInit functions -------------------------------------------------*/</span>
<a name="l00184"></a>00184 <span class="comment">/********************************************************************/</span>
<a name="l00197"></a><a class="code" href="group___u_a_r_t___public___functions.html#g38648a309b0eb01e488f593f93fd9e02">00197</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g38648a309b0eb01e488f593f93fd9e02" title="Initializes the UARTx peripheral according to the specified parameters in the UART_ConfigStruct...">UART_Init</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="struct_u_a_r_t___c_f_g___type.html" title="UART Configuration Structure definition.">UART_CFG_Type</a> *UART_ConfigStruct)
<a name="l00198"></a>00198 {
<a name="l00199"></a>00199         uint32_t tmp;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         <span class="comment">// For debug mode</span>
<a name="l00202"></a>00202         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00203"></a>00203         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#gf3456a08eb7cbd06216265a805cae090">PARAM_UART_DATABIT</a>(UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#098556cca87b59dec334f1febf9c572e">Databits</a>));
<a name="l00204"></a>00204         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g0448a1a38aed57e9b342fe7eb0a89481">PARAM_UART_STOPBIT</a>(UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#bd39a735744275ac05cc74a1d19a5e79">Stopbits</a>));
<a name="l00205"></a>00205         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g052c31e5a11be94eb1e28c8e412844ff">PARAM_UART_PARITY</a>(UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#7b262d8e0922f6ed27e25a216b8ffd73">Parity</a>));
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="preprocessor">#ifdef _UART0</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(UARTx == <a class="code" href="group___l_p_c17xx___system.html#g6ba29f0f9b8af2f72e303533185bcc82">LPC_UART0</a>)
<a name="l00209"></a>00209         {
<a name="l00210"></a>00210                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00211"></a>00211                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#g25e8807a1107e45cb604e0cdf82da4dd">CLKPWR_PCONP_PCUART0</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00212"></a>00212         }
<a name="l00213"></a>00213 <span class="preprocessor">#endif</span>
<a name="l00214"></a>00214 <span class="preprocessor"></span>
<a name="l00215"></a>00215 <span class="preprocessor">#ifdef _UART1</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00217"></a>00217         {
<a name="l00218"></a>00218                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00219"></a>00219                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#ga4d6d3d86ee08058a5879fc8a3eeab25">CLKPWR_PCONP_PCUART1</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00220"></a>00220         }
<a name="l00221"></a>00221 <span class="preprocessor">#endif</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span>
<a name="l00223"></a>00223 <span class="preprocessor">#ifdef _UART2</span>
<a name="l00224"></a>00224 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(UARTx == <a class="code" href="group___l_p_c17xx___system.html#gc8badf231948fc9216d416c71a34e924">LPC_UART2</a>)
<a name="l00225"></a>00225         {
<a name="l00226"></a>00226                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00227"></a>00227                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#gc87ef2376877891f6694a6c033d299db">CLKPWR_PCONP_PCUART2</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00228"></a>00228         }
<a name="l00229"></a>00229 <span class="preprocessor">#endif</span>
<a name="l00230"></a>00230 <span class="preprocessor"></span>
<a name="l00231"></a>00231 <span class="preprocessor">#ifdef _UART3</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(UARTx == <a class="code" href="group___l_p_c17xx___system.html#g61c2bf57d66b50108cdec6878f9e8ee5">LPC_UART3</a>)
<a name="l00233"></a>00233         {
<a name="l00234"></a>00234                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00235"></a>00235                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#gb3c180bc0be3f8ddb32d526262ef0da6">CLKPWR_PCONP_PCUART3</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00236"></a>00236         }
<a name="l00237"></a>00237 <span class="preprocessor">#endif</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00240"></a>00240         {
<a name="l00241"></a>00241                 <span class="comment">/* FIFOs are empty */</span>
<a name="l00242"></a>00242                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*IIFCR.*/</span>FCR = ( <a class="code" href="group___u_a_r_t___private___macros.html#gdec12ecfc7ae1198cee68f2cad982bcb">UART_FCR_FIFO_EN</a> \
<a name="l00243"></a>00243                                 | <a class="code" href="group___u_a_r_t___private___macros.html#g246b37ccd6137c0bb51eb32760cb228e">UART_FCR_RX_RS</a> | <a class="code" href="group___u_a_r_t___private___macros.html#g1c1a83fcacf333309330eea460d8a6a6">UART_FCR_TX_RS</a>);
<a name="l00244"></a>00244                 <span class="comment">// Disable FIFO</span>
<a name="l00245"></a>00245                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*IIFCR.*/</span>FCR = 0;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247                 <span class="comment">// Dummy reading</span>
<a name="l00248"></a>00248                 <span class="keywordflow">while</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LSR &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g3d83de31d722cd373ee69a2a38aaed43">UART_LSR_RDR</a>)
<a name="l00249"></a>00249                 {
<a name="l00250"></a>00250                         tmp = ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*RBTHDLR.*/</span>RBR;
<a name="l00251"></a>00251                 }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;TER = <a class="code" href="group___u_a_r_t___private___macros.html#ga6e9b1099b787bb65c64d2e07d2fc3cf">UART_TER_TXEN</a>;
<a name="l00254"></a>00254                 <span class="comment">// Wait for current transmit complete</span>
<a name="l00255"></a>00255                 <span class="keywordflow">while</span> (!(((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LSR &amp; <a class="code" href="group___u_a_r_t___private___macros.html#ge05118527ef8873b9d7b1b0be0153019">UART_LSR_THRE</a>));
<a name="l00256"></a>00256                 <span class="comment">// Disable Tx</span>
<a name="l00257"></a>00257                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;TER = 0;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259                 <span class="comment">// Disable interrupt</span>
<a name="l00260"></a>00260                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*DLIER.*/</span>IER = 0;
<a name="l00261"></a>00261                 <span class="comment">// Set LCR to default state</span>
<a name="l00262"></a>00262                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR = 0;
<a name="l00263"></a>00263                 <span class="comment">// Set ACR to default state</span>
<a name="l00264"></a>00264                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;ACR = 0;
<a name="l00265"></a>00265                 <span class="comment">// Set Modem Control to default state</span>
<a name="l00266"></a>00266                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;MCR = 0;
<a name="l00267"></a>00267                 <span class="comment">// Set RS485 control to default state</span>
<a name="l00268"></a>00268                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;RS485CTRL = 0;
<a name="l00269"></a>00269                 <span class="comment">// Set RS485 delay timer to default state</span>
<a name="l00270"></a>00270                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;RS485DLY = 0;
<a name="l00271"></a>00271                 <span class="comment">// Set RS485 addr match to default state</span>
<a name="l00272"></a>00272                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;ADRMATCH = 0;
<a name="l00273"></a>00273                 <span class="comment">//Dummy Reading to Clear Status</span>
<a name="l00274"></a>00274                 tmp = ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;MSR;
<a name="l00275"></a>00275                 tmp = ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LSR;
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277         <span class="keywordflow">else</span>
<a name="l00278"></a>00278         {
<a name="l00279"></a>00279                 <span class="comment">/* FIFOs are empty */</span>
<a name="l00280"></a>00280                 UARTx-&gt;<span class="comment">/*IIFCR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#95da54034efc1b39c135d88cede37bfb">FCR</a> = ( <a class="code" href="group___u_a_r_t___private___macros.html#gdec12ecfc7ae1198cee68f2cad982bcb">UART_FCR_FIFO_EN</a> | <a class="code" href="group___u_a_r_t___private___macros.html#g246b37ccd6137c0bb51eb32760cb228e">UART_FCR_RX_RS</a> | <a class="code" href="group___u_a_r_t___private___macros.html#g1c1a83fcacf333309330eea460d8a6a6">UART_FCR_TX_RS</a>);
<a name="l00281"></a>00281                 <span class="comment">// Disable FIFO</span>
<a name="l00282"></a>00282                 UARTx-&gt;<span class="comment">/*IIFCR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#95da54034efc1b39c135d88cede37bfb">FCR</a> = 0;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284                 <span class="comment">// Dummy reading</span>
<a name="l00285"></a>00285                 <span class="keywordflow">while</span> (UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g3d83de31d722cd373ee69a2a38aaed43">UART_LSR_RDR</a>)
<a name="l00286"></a>00286                 {
<a name="l00287"></a>00287                         tmp = UARTx-&gt;<span class="comment">/*RBTHDLR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#a20b56592acd94dc5526b0ac5e8dea1e">RBR</a>;
<a name="l00288"></a>00288                 }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#3a6e44664231b6cc96676c55a56d2e0c">TER</a> = <a class="code" href="group___u_a_r_t___private___macros.html#ga6e9b1099b787bb65c64d2e07d2fc3cf">UART_TER_TXEN</a>;
<a name="l00291"></a>00291                 <span class="comment">// Wait for current transmit complete</span>
<a name="l00292"></a>00292                 <span class="keywordflow">while</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#ge05118527ef8873b9d7b1b0be0153019">UART_LSR_THRE</a>));
<a name="l00293"></a>00293                 <span class="comment">// Disable Tx</span>
<a name="l00294"></a>00294                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#3a6e44664231b6cc96676c55a56d2e0c">TER</a> = 0;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296                 <span class="comment">// Disable interrupt</span>
<a name="l00297"></a>00297                 UARTx-&gt;<span class="comment">/*DLIER.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#6566f8cfbd1d8aa7e8db046aa35e77db">IER</a> = 0;
<a name="l00298"></a>00298                 <span class="comment">// Set LCR to default state</span>
<a name="l00299"></a>00299                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> = 0;
<a name="l00300"></a>00300                 <span class="comment">// Set ACR to default state</span>
<a name="l00301"></a>00301                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9cb55206b29a8c16354747c556ab8bea">ACR</a> = 0;
<a name="l00302"></a>00302                 <span class="comment">// Dummy reading</span>
<a name="l00303"></a>00303                 tmp = UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#573615f4a61289f083173114b3dac919">LSR</a>;
<a name="l00304"></a>00304         }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306         <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#g61c2bf57d66b50108cdec6878f9e8ee5">LPC_UART3</a>)
<a name="l00307"></a>00307         {
<a name="l00308"></a>00308                 <span class="comment">// Set IrDA to default state</span>
<a name="l00309"></a>00309                 UARTx-&gt;ICR = 0;
<a name="l00310"></a>00310         }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312         <span class="comment">// Set Line Control register ----------------------------</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314         uart_set_divisors(UARTx, (UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#0671d2e65beb66eb956c07e9e7a03276">Baud_rate</a>));
<a name="l00315"></a>00315 
<a name="l00316"></a>00316         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00317"></a>00317         {
<a name="l00318"></a>00318                 tmp = (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR &amp; (<a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a> | <a class="code" href="group___u_a_r_t___private___macros.html#g2f83aa82aecd63cf457ea423be643d57">UART_LCR_BREAK_EN</a>)) \
<a name="l00319"></a>00319                                 &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>;
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321         <span class="keywordflow">else</span>
<a name="l00322"></a>00322         {
<a name="l00323"></a>00323                 tmp = (UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> &amp; (<a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a> | <a class="code" href="group___u_a_r_t___private___macros.html#g2f83aa82aecd63cf457ea423be643d57">UART_LCR_BREAK_EN</a>)) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>;
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326         <span class="keywordflow">switch</span> (UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#098556cca87b59dec334f1febf9c572e">Databits</a>){
<a name="l00327"></a>00327         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg2b8c6f7ae8c1ff3557b3c9b67be69648b8edf3c4ac9cd19a77a78046c8d7c21d">UART_DATABIT_5</a>:
<a name="l00328"></a>00328                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g2c64fd92092b8ac1e64b6b1204927682">UART_LCR_WLEN5</a>;
<a name="l00329"></a>00329                 <span class="keywordflow">break</span>;
<a name="l00330"></a>00330         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg2b8c6f7ae8c1ff3557b3c9b67be6964828d637fedc642319e85aa69ee7460143">UART_DATABIT_6</a>:
<a name="l00331"></a>00331                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g916fcefe6db8651be1cb1c066726381d">UART_LCR_WLEN6</a>;
<a name="l00332"></a>00332                 <span class="keywordflow">break</span>;
<a name="l00333"></a>00333         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg2b8c6f7ae8c1ff3557b3c9b67be6964864eeea6c1646790ebd4acc2557aaf393">UART_DATABIT_7</a>:
<a name="l00334"></a>00334                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g7746eb5a2aac4b9f86e97ee82e5e2a10">UART_LCR_WLEN7</a>;
<a name="l00335"></a>00335                 <span class="keywordflow">break</span>;
<a name="l00336"></a>00336         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg2b8c6f7ae8c1ff3557b3c9b67be696485a1857edfe041a41ef5e7f098be8ead2">UART_DATABIT_8</a>:
<a name="l00337"></a>00337         <span class="keywordflow">default</span>:
<a name="l00338"></a>00338                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g71ecde192fb0c9facb9ef9c6b77cc687">UART_LCR_WLEN8</a>;
<a name="l00339"></a>00339                 <span class="keywordflow">break</span>;
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         <span class="keywordflow">if</span> (UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#7b262d8e0922f6ed27e25a216b8ffd73">Parity</a> == <a class="code" href="group___u_a_r_t___public___types.html#gg66fa9d836eb6f7035939427e6f8cc318a80d2d8ea61454045ebe71d155e85b3d">UART_PARITY_NONE</a>)
<a name="l00343"></a>00343         {
<a name="l00344"></a>00344                 <span class="comment">// Do nothing...</span>
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346         <span class="keywordflow">else</span>
<a name="l00347"></a>00347         {
<a name="l00348"></a>00348                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g4fba4b3d639bdfa713d12466d411f57c">UART_LCR_PARITY_EN</a>;
<a name="l00349"></a>00349                 <span class="keywordflow">switch</span> (UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#7b262d8e0922f6ed27e25a216b8ffd73">Parity</a>)
<a name="l00350"></a>00350                 {
<a name="l00351"></a>00351                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg66fa9d836eb6f7035939427e6f8cc318d90cc425f5ba447773a44a75be6593e2">UART_PARITY_ODD</a>:
<a name="l00352"></a>00352                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g5ef9bdb85d3f5c3823d667190b19bb40">UART_LCR_PARITY_ODD</a>;
<a name="l00353"></a>00353                         <span class="keywordflow">break</span>;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg66fa9d836eb6f7035939427e6f8cc318d908a637b1dd23f93b149dd2d8bdfdb8">UART_PARITY_EVEN</a>:
<a name="l00356"></a>00356                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g48df31af63d9e3a65b13a32880bb0b36">UART_LCR_PARITY_EVEN</a>;
<a name="l00357"></a>00357                         <span class="keywordflow">break</span>;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg66fa9d836eb6f7035939427e6f8cc318e9f804cb1d440a3a890fd7617450d2a1">UART_PARITY_SP_1</a>:
<a name="l00360"></a>00360                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g17566959150e60563687a91817ddf844">UART_LCR_PARITY_F_1</a>;
<a name="l00361"></a>00361                         <span class="keywordflow">break</span>;
<a name="l00362"></a>00362 
<a name="l00363"></a>00363                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg66fa9d836eb6f7035939427e6f8cc3187b7ef44908952b2188985f07f81420f6">UART_PARITY_SP_0</a>:
<a name="l00364"></a>00364                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#ga5d9db8e53dae40ddaa70204fa1b60a3">UART_LCR_PARITY_F_0</a>;
<a name="l00365"></a>00365                         <span class="keywordflow">break</span>;
<a name="l00366"></a>00366                 <span class="keywordflow">default</span>:
<a name="l00367"></a>00367                         <span class="keywordflow">break</span>;
<a name="l00368"></a>00368                 }
<a name="l00369"></a>00369         }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371         <span class="keywordflow">switch</span> (UART_ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#bd39a735744275ac05cc74a1d19a5e79">Stopbits</a>){
<a name="l00372"></a>00372         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gga539c23e185a76d77b3c9efc3d62b68ccdc53828459d69a364db0fc85c4dd7b1">UART_STOPBIT_2</a>:
<a name="l00373"></a>00373                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#ge18d2dcf0d93727fc4ac3fae1960b1df">UART_LCR_STOPBIT_SEL</a>;
<a name="l00374"></a>00374                 <span class="keywordflow">break</span>;
<a name="l00375"></a>00375         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gga539c23e185a76d77b3c9efc3d62b68cb9c26fe02b2f4407d7106ea4da1f74ab">UART_STOPBIT_1</a>:
<a name="l00376"></a>00376         <span class="keywordflow">default</span>:
<a name="l00377"></a>00377                 <span class="comment">// Do no thing</span>
<a name="l00378"></a>00378                 <span class="keywordflow">break</span>;
<a name="l00379"></a>00379         }
<a name="l00380"></a>00380 
<a name="l00381"></a>00381 
<a name="l00382"></a>00382         <span class="comment">// Write back to LCR, configure FIFO and Disable Tx</span>
<a name="l00383"></a>00383         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) ==  LPC_UART1)
<a name="l00384"></a>00384         {
<a name="l00385"></a>00385                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR = (uint8_t)(tmp &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>);
<a name="l00386"></a>00386         }
<a name="l00387"></a>00387         <span class="keywordflow">else</span>
<a name="l00388"></a>00388         {
<a name="l00389"></a>00389                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> = (uint8_t)(tmp &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>);
<a name="l00390"></a>00390         }
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">/*********************************************************************/</span>
<a name="l00403"></a><a class="code" href="group___u_a_r_t___public___functions.html#g3074f639a2a3de38e5d0129c8ba113b4">00403</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g3074f639a2a3de38e5d0129c8ba113b4" title="De-initializes the UARTx peripheral registers to their default reset values.">UART_DeInit</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx)
<a name="l00404"></a>00404 {
<a name="l00405"></a>00405         <span class="comment">// For debug mode</span>
<a name="l00406"></a>00406         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00407"></a>00407 
<a name="l00408"></a>00408         <a class="code" href="group___u_a_r_t___public___functions.html#g3400356ef61d3735d9d10e04e0e95df4" title="Enable/Disable transmission on UART TxD pin.">UART_TxCmd</a>(UARTx, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="preprocessor">#ifdef _UART0</span>
<a name="l00411"></a>00411 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#g6ba29f0f9b8af2f72e303533185bcc82">LPC_UART0</a>)
<a name="l00412"></a>00412         {
<a name="l00413"></a>00413                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00414"></a>00414                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#g25e8807a1107e45cb604e0cdf82da4dd">CLKPWR_PCONP_PCUART0</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>);
<a name="l00415"></a>00415         }
<a name="l00416"></a>00416 <span class="preprocessor">#endif</span>
<a name="l00417"></a>00417 <span class="preprocessor"></span>
<a name="l00418"></a>00418 <span class="preprocessor">#ifdef _UART1</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00420"></a>00420         {
<a name="l00421"></a>00421                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00422"></a>00422                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#ga4d6d3d86ee08058a5879fc8a3eeab25">CLKPWR_PCONP_PCUART1</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>);
<a name="l00423"></a>00423         }
<a name="l00424"></a>00424 <span class="preprocessor">#endif</span>
<a name="l00425"></a>00425 <span class="preprocessor"></span>
<a name="l00426"></a>00426 <span class="preprocessor">#ifdef _UART2</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#gc8badf231948fc9216d416c71a34e924">LPC_UART2</a>)
<a name="l00428"></a>00428         {
<a name="l00429"></a>00429                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00430"></a>00430                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#gc87ef2376877891f6694a6c033d299db">CLKPWR_PCONP_PCUART2</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>);
<a name="l00431"></a>00431         }
<a name="l00432"></a>00432 <span class="preprocessor">#endif</span>
<a name="l00433"></a>00433 <span class="preprocessor"></span>
<a name="l00434"></a>00434 <span class="preprocessor">#ifdef _UART3</span>
<a name="l00435"></a>00435 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (UARTx == <a class="code" href="group___l_p_c17xx___system.html#g61c2bf57d66b50108cdec6878f9e8ee5">LPC_UART3</a>)
<a name="l00436"></a>00436         {
<a name="l00437"></a>00437                 <span class="comment">/* Set up clock and power for UART module */</span>
<a name="l00438"></a>00438                 <a class="code" href="group___c_l_k_p_w_r___public___functions.html#gc29f7879a37c604a1040499001ba0121" title="Configure power supply for each peripheral according to NewState.">CLKPWR_ConfigPPWR</a> (<a class="code" href="group___c_l_k_p_w_r___public___macros.html#gb3c180bc0be3f8ddb32d526262ef0da6">CLKPWR_PCONP_PCUART3</a>, <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>);
<a name="l00439"></a>00439         }
<a name="l00440"></a>00440 <span class="preprocessor">#endif</span>
<a name="l00441"></a>00441 <span class="preprocessor"></span>}
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="comment">/*****************************************************************************/</span>
<a name="l00453"></a><a class="code" href="group___u_a_r_t___public___functions.html#gb27415db995bfdbcd9984073833053d9">00453</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#gb27415db995bfdbcd9984073833053d9" title="Fills each UART_InitStruct member with its default value:9600 bps8-bit data1 StopbitNone...">UART_ConfigStructInit</a>(<a class="code" href="struct_u_a_r_t___c_f_g___type.html" title="UART Configuration Structure definition.">UART_CFG_Type</a> *UART_InitStruct)
<a name="l00454"></a>00454 {
<a name="l00455"></a>00455         UART_InitStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#0671d2e65beb66eb956c07e9e7a03276">Baud_rate</a> = 9600;
<a name="l00456"></a>00456         UART_InitStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#098556cca87b59dec334f1febf9c572e">Databits</a> = <a class="code" href="group___u_a_r_t___public___types.html#gg2b8c6f7ae8c1ff3557b3c9b67be696485a1857edfe041a41ef5e7f098be8ead2">UART_DATABIT_8</a>;
<a name="l00457"></a>00457         UART_InitStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#7b262d8e0922f6ed27e25a216b8ffd73">Parity</a> = <a class="code" href="group___u_a_r_t___public___types.html#gg66fa9d836eb6f7035939427e6f8cc318a80d2d8ea61454045ebe71d155e85b3d">UART_PARITY_NONE</a>;
<a name="l00458"></a>00458         UART_InitStruct-&gt;<a class="code" href="struct_u_a_r_t___c_f_g___type.html#bd39a735744275ac05cc74a1d19a5e79">Stopbits</a> = <a class="code" href="group___u_a_r_t___public___types.html#gga539c23e185a76d77b3c9efc3d62b68cb9c26fe02b2f4407d7106ea4da1f74ab">UART_STOPBIT_1</a>;
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 <span class="comment">/* UART Send/Recieve functions -------------------------------------------------*/</span>
<a name="l00462"></a>00462 <span class="comment">/*********************************************************************/</span>
<a name="l00472"></a><a class="code" href="group___u_a_r_t___public___functions.html#ged06c5f6548091cba78b88700b82ad62">00472</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#ged06c5f6548091cba78b88700b82ad62" title="Transmit a single data through UART peripheral.">UART_SendByte</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx, uint8_t Data)
<a name="l00473"></a>00473 {
<a name="l00474"></a>00474         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00475"></a>00475 
<a name="l00476"></a>00476         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00477"></a>00477         {
<a name="l00478"></a>00478                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*RBTHDLR.*/</span>THR = Data &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g1592b78e87967ae6a06756679cfc855e">UART_THR_MASKBIT</a>;
<a name="l00479"></a>00479         }
<a name="l00480"></a>00480         <span class="keywordflow">else</span>
<a name="l00481"></a>00481         {
<a name="l00482"></a>00482                 UARTx-&gt;<span class="comment">/*RBTHDLR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#7824146963ba37d60dd75ae1a13e650d">THR</a> = Data &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g1592b78e87967ae6a06756679cfc855e">UART_THR_MASKBIT</a>;
<a name="l00483"></a>00483         }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 
<a name="l00488"></a>00488 <span class="comment">/*********************************************************************/</span>
<a name="l00497"></a><a class="code" href="group___u_a_r_t___public___functions.html#gfbb690c2811d921f8c733888fdbfef54">00497</a> uint8_t <a class="code" href="group___u_a_r_t___public___functions.html#gfbb690c2811d921f8c733888fdbfef54" title="Receive a single data from UART peripheral.">UART_ReceiveByte</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx)
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00500"></a>00500 
<a name="l00501"></a>00501         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00502"></a>00502         {
<a name="l00503"></a>00503                 <span class="keywordflow">return</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*RBTHDLR.*/</span>RBR &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g06774e65c2ca095c4373122ed9a390b8">UART_RBR_MASKBIT</a>);
<a name="l00504"></a>00504         }
<a name="l00505"></a>00505         <span class="keywordflow">else</span>
<a name="l00506"></a>00506         {
<a name="l00507"></a>00507                 <span class="keywordflow">return</span> (UARTx-&gt;<span class="comment">/*RBTHDLR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#a20b56592acd94dc5526b0ac5e8dea1e">RBR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g06774e65c2ca095c4373122ed9a390b8">UART_RBR_MASKBIT</a>);
<a name="l00508"></a>00508         }
<a name="l00509"></a>00509 }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 <span class="comment">/*********************************************************************/</span>
<a name="l00527"></a><a class="code" href="group___u_a_r_t___public___functions.html#gdeb1a6a95247931abb93fa49571ae51c">00527</a> uint32_t <a class="code" href="group___u_a_r_t___public___functions.html#gdeb1a6a95247931abb93fa49571ae51c" title="Send a block of data via UART peripheral.">UART_Send</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, uint8_t *txbuf,
<a name="l00528"></a>00528                 uint32_t buflen, <a class="code" href="group___l_p_c___types___public___types.html#gddb88bff95842be0c54e0e979f45cf95">TRANSFER_BLOCK_Type</a> flag)
<a name="l00529"></a>00529 {
<a name="l00530"></a>00530         uint32_t bToSend, bSent, timeOut, fifo_cnt;
<a name="l00531"></a>00531         uint8_t *pChar = txbuf;
<a name="l00532"></a>00532 
<a name="l00533"></a>00533         bToSend = buflen;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535         <span class="comment">// blocking mode</span>
<a name="l00536"></a>00536         <span class="keywordflow">if</span> (flag == <a class="code" href="group___l_p_c___types___public___types.html#ggddb88bff95842be0c54e0e979f45cf95854a1cd6e3a98db9e290dddea29725e7">BLOCKING</a>) {
<a name="l00537"></a>00537                 bSent = 0;
<a name="l00538"></a>00538                 <span class="keywordflow">while</span> (bToSend){
<a name="l00539"></a>00539                         timeOut = <a class="code" href="group___u_a_r_t___public___macros.html#g98a009d55ad0d99b3f84391f0552faeb">UART_BLOCKING_TIMEOUT</a>;
<a name="l00540"></a>00540                         <span class="comment">// Wait for THR empty with timeout</span>
<a name="l00541"></a>00541                         <span class="keywordflow">while</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#ge05118527ef8873b9d7b1b0be0153019">UART_LSR_THRE</a>)) {
<a name="l00542"></a>00542                                 <span class="keywordflow">if</span> (timeOut == 0) <span class="keywordflow">break</span>;
<a name="l00543"></a>00543                                 timeOut--;
<a name="l00544"></a>00544                         }
<a name="l00545"></a>00545                         <span class="comment">// Time out!</span>
<a name="l00546"></a>00546                         <span class="keywordflow">if</span>(timeOut == 0) <span class="keywordflow">break</span>;
<a name="l00547"></a>00547                         fifo_cnt = <a class="code" href="group___u_a_r_t___private___macros.html#g94b76465adbb4fb96c821ef0866cbd0f">UART_TX_FIFO_SIZE</a>;
<a name="l00548"></a>00548                         <span class="keywordflow">while</span> (fifo_cnt &amp;&amp; bToSend){
<a name="l00549"></a>00549                                 <a class="code" href="group___u_a_r_t___public___functions.html#ged06c5f6548091cba78b88700b82ad62" title="Transmit a single data through UART peripheral.">UART_SendByte</a>(UARTx, (*pChar++));
<a name="l00550"></a>00550                                 fifo_cnt--;
<a name="l00551"></a>00551                                 bToSend--;
<a name="l00552"></a>00552                                 bSent++;
<a name="l00553"></a>00553                         }
<a name="l00554"></a>00554                 }
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556         <span class="comment">// None blocking mode</span>
<a name="l00557"></a>00557         <span class="keywordflow">else</span> {
<a name="l00558"></a>00558                 bSent = 0;
<a name="l00559"></a>00559                 <span class="keywordflow">while</span> (bToSend) {
<a name="l00560"></a>00560                         <span class="keywordflow">if</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#ge05118527ef8873b9d7b1b0be0153019">UART_LSR_THRE</a>)){
<a name="l00561"></a>00561                                 <span class="keywordflow">break</span>;
<a name="l00562"></a>00562                         }
<a name="l00563"></a>00563                         fifo_cnt = <a class="code" href="group___u_a_r_t___private___macros.html#g94b76465adbb4fb96c821ef0866cbd0f">UART_TX_FIFO_SIZE</a>;
<a name="l00564"></a>00564                         <span class="keywordflow">while</span> (fifo_cnt &amp;&amp; bToSend) {
<a name="l00565"></a>00565                                 <a class="code" href="group___u_a_r_t___public___functions.html#ged06c5f6548091cba78b88700b82ad62" title="Transmit a single data through UART peripheral.">UART_SendByte</a>(UARTx, (*pChar++));
<a name="l00566"></a>00566                                 bToSend--;
<a name="l00567"></a>00567                                 fifo_cnt--;
<a name="l00568"></a>00568                                 bSent++;
<a name="l00569"></a>00569                         }
<a name="l00570"></a>00570                 }
<a name="l00571"></a>00571         }
<a name="l00572"></a>00572         <span class="keywordflow">return</span> bSent;
<a name="l00573"></a>00573 }
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 <span class="comment">/*********************************************************************/</span>
<a name="l00592"></a><a class="code" href="group___u_a_r_t___public___functions.html#g83868ce3b59f46e618c4fc4d864895a1">00592</a> uint32_t <a class="code" href="group___u_a_r_t___public___functions.html#g83868ce3b59f46e618c4fc4d864895a1" title="Receive a block of data via UART peripheral.">UART_Receive</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, uint8_t *rxbuf, \
<a name="l00593"></a>00593                 uint32_t buflen, <a class="code" href="group___l_p_c___types___public___types.html#gddb88bff95842be0c54e0e979f45cf95">TRANSFER_BLOCK_Type</a> flag)
<a name="l00594"></a>00594 {
<a name="l00595"></a>00595         uint32_t bToRecv, bRecv, timeOut;
<a name="l00596"></a>00596         uint8_t *pChar = rxbuf;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598         bToRecv = buflen;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600         <span class="comment">// Blocking mode</span>
<a name="l00601"></a>00601         <span class="keywordflow">if</span> (flag == <a class="code" href="group___l_p_c___types___public___types.html#ggddb88bff95842be0c54e0e979f45cf95854a1cd6e3a98db9e290dddea29725e7">BLOCKING</a>) {
<a name="l00602"></a>00602                 bRecv = 0;
<a name="l00603"></a>00603                 <span class="keywordflow">while</span> (bToRecv){
<a name="l00604"></a>00604                         timeOut = <a class="code" href="group___u_a_r_t___public___macros.html#g98a009d55ad0d99b3f84391f0552faeb">UART_BLOCKING_TIMEOUT</a>;
<a name="l00605"></a>00605                         <span class="keywordflow">while</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g3d83de31d722cd373ee69a2a38aaed43">UART_LSR_RDR</a>)){
<a name="l00606"></a>00606                                 <span class="keywordflow">if</span> (timeOut == 0) <span class="keywordflow">break</span>;
<a name="l00607"></a>00607                                 timeOut--;
<a name="l00608"></a>00608                         }
<a name="l00609"></a>00609                         <span class="comment">// Time out!</span>
<a name="l00610"></a>00610                         <span class="keywordflow">if</span>(timeOut == 0) <span class="keywordflow">break</span>;
<a name="l00611"></a>00611                         <span class="comment">// Get data from the buffer</span>
<a name="l00612"></a>00612                         (*pChar++) = <a class="code" href="group___u_a_r_t___public___functions.html#gfbb690c2811d921f8c733888fdbfef54" title="Receive a single data from UART peripheral.">UART_ReceiveByte</a>(UARTx);
<a name="l00613"></a>00613                         bToRecv--;
<a name="l00614"></a>00614                         bRecv++;
<a name="l00615"></a>00615                 }
<a name="l00616"></a>00616         }
<a name="l00617"></a>00617         <span class="comment">// None blocking mode</span>
<a name="l00618"></a>00618         <span class="keywordflow">else</span> {
<a name="l00619"></a>00619                 bRecv = 0;
<a name="l00620"></a>00620                 <span class="keywordflow">while</span> (bToRecv) {
<a name="l00621"></a>00621                         <span class="keywordflow">if</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g3d83de31d722cd373ee69a2a38aaed43">UART_LSR_RDR</a>)) {
<a name="l00622"></a>00622                                 <span class="keywordflow">break</span>;
<a name="l00623"></a>00623                         } <span class="keywordflow">else</span> {
<a name="l00624"></a>00624                                 (*pChar++) = <a class="code" href="group___u_a_r_t___public___functions.html#gfbb690c2811d921f8c733888fdbfef54" title="Receive a single data from UART peripheral.">UART_ReceiveByte</a>(UARTx);
<a name="l00625"></a>00625                                 bRecv++;
<a name="l00626"></a>00626                                 bToRecv--;
<a name="l00627"></a>00627                         }
<a name="l00628"></a>00628                 }
<a name="l00629"></a>00629         }
<a name="l00630"></a>00630         <span class="keywordflow">return</span> bRecv;
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="comment">/*********************************************************************/</span>
<a name="l00643"></a><a class="code" href="group___u_a_r_t___public___functions.html#g68161f5403a077379de35494b6b03273">00643</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g68161f5403a077379de35494b6b03273" title="Force BREAK character on UART line, output pin UARTx TXD is forced to logic 0.">UART_ForceBreak</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx)
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00646"></a>00646 
<a name="l00647"></a>00647         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00648"></a>00648         {
<a name="l00649"></a>00649                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR |= <a class="code" href="group___u_a_r_t___private___macros.html#g2f83aa82aecd63cf457ea423be643d57">UART_LCR_BREAK_EN</a>;
<a name="l00650"></a>00650         }
<a name="l00651"></a>00651         <span class="keywordflow">else</span>
<a name="l00652"></a>00652         {
<a name="l00653"></a>00653                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#g2f83aa82aecd63cf457ea423be643d57">UART_LCR_BREAK_EN</a>;
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657 
<a name="l00658"></a>00658 <span class="comment">/********************************************************************/</span>
<a name="l00680"></a><a class="code" href="group___u_a_r_t___public___functions.html#g4bad6b6b83a5345ea0d78427a5df5284">00680</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g4bad6b6b83a5345ea0d78427a5df5284" title="Enable or disable specified UART interrupt.">UART_IntConfig</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="group___u_a_r_t___public___types.html#g7ee4c5ddc0e165158d0d9f1f03e1b66c" title="UART Interrupt Type definitions.">UART_INT_Type</a> UARTIntCfg, <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l00681"></a>00681 {
<a name="l00682"></a>00682         uint32_t tmp;
<a name="l00683"></a>00683 
<a name="l00684"></a>00684         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00685"></a>00685         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(NewState));
<a name="l00686"></a>00686 
<a name="l00687"></a>00687         <span class="keywordflow">switch</span>(UARTIntCfg){
<a name="l00688"></a>00688                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66ccc310a6b8547b644e07e769df4fde8fa">UART_INTCFG_RBR</a>:
<a name="l00689"></a>00689                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#gd6400102a6ec4fa634656b7ef18d1eba">UART_IER_RBRINT_EN</a>;
<a name="l00690"></a>00690                         <span class="keywordflow">break</span>;
<a name="l00691"></a>00691                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66c67b291fd89766fa19cb89288b25af35b">UART_INTCFG_THRE</a>:
<a name="l00692"></a>00692                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g6ad0b05af9d9599e6ce9dd5521c2aa74">UART_IER_THREINT_EN</a>;
<a name="l00693"></a>00693                         <span class="keywordflow">break</span>;
<a name="l00694"></a>00694                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66c77a61936f15e2a4069cdf45d71b140c9">UART_INTCFG_RLS</a>:
<a name="l00695"></a>00695                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g11515e64ac0353023a4b62a9ca5ad0ae">UART_IER_RLSINT_EN</a>;
<a name="l00696"></a>00696                         <span class="keywordflow">break</span>;
<a name="l00697"></a>00697                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66c6e9edcb2e05e9dc886acd7f194a84ba3">UART1_INTCFG_MS</a>:
<a name="l00698"></a>00698                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g8c0039a611efc20fc28d344406d3e2cc">UART1_IER_MSINT_EN</a>;
<a name="l00699"></a>00699                         <span class="keywordflow">break</span>;
<a name="l00700"></a>00700                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66c9ea853ac0b6dece30a9d7aa2a0ca1110">UART1_INTCFG_CTS</a>:
<a name="l00701"></a>00701                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g3e1fdb6a9caf561de81d24821cb51f17">UART1_IER_CTSINT_EN</a>;
<a name="l00702"></a>00702                         <span class="keywordflow">break</span>;
<a name="l00703"></a>00703                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66cc0a7b0a2b1bf47b4ea548a1a6a53e174">UART_INTCFG_ABEO</a>:
<a name="l00704"></a>00704                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g370755782fbd47ad2c33ad281462bf45">UART_IER_ABEOINT_EN</a>;
<a name="l00705"></a>00705                         <span class="keywordflow">break</span>;
<a name="l00706"></a>00706                 <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg7ee4c5ddc0e165158d0d9f1f03e1b66c773e56dd8db09799644143cf91cda057">UART_INTCFG_ABTO</a>:
<a name="l00707"></a>00707                         tmp = <a class="code" href="group___u_a_r_t___private___macros.html#gc6579cde413efce70ee1103ef278368f">UART_IER_ABTOINT_EN</a>;
<a name="l00708"></a>00708                         <span class="keywordflow">break</span>;
<a name="l00709"></a>00709         }
<a name="l00710"></a>00710 
<a name="l00711"></a>00711         <span class="keywordflow">if</span> ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *) UARTx == LPC_UART1)
<a name="l00712"></a>00712         {
<a name="l00713"></a>00713                 <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>((<a class="code" href="group___u_a_r_t___private___macros.html#g171daae3e093db803ef00fd83e55e63a">PARAM_UART_INTCFG</a>(UARTIntCfg)) || (<a class="code" href="group___u_a_r_t___private___macros.html#g00e007ced7dcc7c6181fef60a9b95a35">PARAM_UART1_INTCFG</a>(UARTIntCfg)));
<a name="l00714"></a>00714         }
<a name="l00715"></a>00715         <span class="keywordflow">else</span>
<a name="l00716"></a>00716         {
<a name="l00717"></a>00717                 <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g171daae3e093db803ef00fd83e55e63a">PARAM_UART_INTCFG</a>(UARTIntCfg));
<a name="l00718"></a>00718         }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l00721"></a>00721         {
<a name="l00722"></a>00722                 <span class="keywordflow">if</span> ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *) UARTx == LPC_UART1)
<a name="l00723"></a>00723                 {
<a name="l00724"></a>00724                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*DLIER.*/</span>IER |= tmp;
<a name="l00725"></a>00725                 }
<a name="l00726"></a>00726                 <span class="keywordflow">else</span>
<a name="l00727"></a>00727                 {
<a name="l00728"></a>00728                         UARTx-&gt;<span class="comment">/*DLIER.*/</span><a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#6566f8cfbd1d8aa7e8db046aa35e77db">IER</a> |= tmp;
<a name="l00729"></a>00729                 }
<a name="l00730"></a>00730         }
<a name="l00731"></a>00731         <span class="keywordflow">else</span>
<a name="l00732"></a>00732         {
<a name="l00733"></a>00733                 <span class="keywordflow">if</span> ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *) UARTx == LPC_UART1)
<a name="l00734"></a>00734                 {
<a name="l00735"></a>00735                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*DLIER.*/</span>IER &amp;= (~tmp) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g145046fd9bd1d318acffd4770a7432ec">UART1_IER_BITMASK</a>;
<a name="l00736"></a>00736                 }
<a name="l00737"></a>00737                 <span class="keywordflow">else</span>
<a name="l00738"></a>00738                 {
<a name="l00739"></a>00739                         UARTx-&gt;<span class="comment">/*DLIER.*/</span><a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#6566f8cfbd1d8aa7e8db046aa35e77db">IER</a> &amp;= (~tmp) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g101e57e41855d1262e9d9b747854542f">UART_IER_BITMASK</a>;
<a name="l00740"></a>00740                 }
<a name="l00741"></a>00741         }
<a name="l00742"></a>00742 }
<a name="l00743"></a>00743 
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 <span class="comment">/********************************************************************/</span>
<a name="l00761"></a><a class="code" href="group___u_a_r_t___public___functions.html#g089fc39675174ed51294ea96e4417f0d">00761</a> uint8_t <a class="code" href="group___u_a_r_t___public___functions.html#g089fc39675174ed51294ea96e4417f0d" title="Get current value of Line Status register in UART peripheral.">UART_GetLineStatus</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx)
<a name="l00762"></a>00762 {
<a name="l00763"></a>00763         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00764"></a>00764 
<a name="l00765"></a>00765         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00766"></a>00766         {
<a name="l00767"></a>00767                 <span class="keywordflow">return</span> ((((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)LPC_UART1)-&gt;LSR) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g3643d58e12f1d3bf342d140a5e3cb1ae">UART_LSR_BITMASK</a>);
<a name="l00768"></a>00768         }
<a name="l00769"></a>00769         <span class="keywordflow">else</span>
<a name="l00770"></a>00770         {
<a name="l00771"></a>00771                 <span class="keywordflow">return</span> ((UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#573615f4a61289f083173114b3dac919">LSR</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g3643d58e12f1d3bf342d140a5e3cb1ae">UART_LSR_BITMASK</a>);
<a name="l00772"></a>00772         }
<a name="l00773"></a>00773 }
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 <span class="comment">/********************************************************************/</span>
<a name="l00784"></a><a class="code" href="group___u_a_r_t___public___functions.html#g09314371b86b1597b7aafd912cf6222f">00784</a> uint32_t <a class="code" href="group___u_a_r_t___public___functions.html#g09314371b86b1597b7aafd912cf6222f" title="Get Interrupt Identification value.">UART_GetIntId</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx)
<a name="l00785"></a>00785 {
<a name="l00786"></a>00786         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00787"></a>00787         <span class="keywordflow">return</span> (UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#2cab358d182aaf444bd1e2e6fa824d15">IIR</a> &amp; 0x03CF);
<a name="l00788"></a>00788 }
<a name="l00789"></a>00789 
<a name="l00790"></a>00790 <span class="comment">/*********************************************************************/</span>
<a name="l00799"></a><a class="code" href="group___u_a_r_t___public___functions.html#g78570fc7b78e558ab87abacd9bb22f73">00799</a> <a class="code" href="group___l_p_c___types___public___types.html#g89136caac2e14c55151f527ac02daaff" title="Flag Status and Interrupt Flag Status type definition.">FlagStatus</a> <a class="code" href="group___u_a_r_t___public___functions.html#g78570fc7b78e558ab87abacd9bb22f73" title="Check whether if UART is busy or not.">UART_CheckBusy</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx)
<a name="l00800"></a>00800 {
<a name="l00801"></a>00801         <span class="keywordflow">if</span> (UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#gdb3f8bb82f0a253700fdb88d8c609710">UART_LSR_TEMT</a>){
<a name="l00802"></a>00802                 <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gg89136caac2e14c55151f527ac02daaff589b7d94a3d91d145720e2fed0eb3a05">RESET</a>;
<a name="l00803"></a>00803         } <span class="keywordflow">else</span> {
<a name="l00804"></a>00804                 <span class="keywordflow">return</span> <a class="code" href="group___l_p_c___types___public___types.html#gg89136caac2e14c55151f527ac02daaffb44c8101cc294c074709ec1b14211792">SET</a>;
<a name="l00805"></a>00805         }
<a name="l00806"></a>00806 }
<a name="l00807"></a>00807 
<a name="l00808"></a>00808 
<a name="l00809"></a>00809 <span class="comment">/*********************************************************************/</span>
<a name="l00820"></a><a class="code" href="group___u_a_r_t___public___functions.html#g91f3bb9558513f4a1da4163997bd198b">00820</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g91f3bb9558513f4a1da4163997bd198b" title="Configure FIFO function on selected UART peripheral.">UART_FIFOConfig</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html" title="UART FIFO Configuration Structure definition.">UART_FIFO_CFG_Type</a> *FIFOCfg)
<a name="l00821"></a>00821 {
<a name="l00822"></a>00822         uint8_t tmp = 0;
<a name="l00823"></a>00823 
<a name="l00824"></a>00824         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00825"></a>00825         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g212c4e823ceaed608a539aeca01bda80">PARAM_UART_FIFO_LEVEL</a>(FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#49b9769397e267360c6563a0f2596b94">FIFO_Level</a>));
<a name="l00826"></a>00826         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#6927af93232feb293135f57ebb962646">FIFO_DMAMode</a>));
<a name="l00827"></a>00827         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#54fb576adf7a8a796b5e276a5fb5c672">FIFO_ResetRxBuf</a>));
<a name="l00828"></a>00828         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#c909428aa3d1ea114a0dfeba23882d0f">FIFO_ResetTxBuf</a>));
<a name="l00829"></a>00829 
<a name="l00830"></a>00830         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#gdec12ecfc7ae1198cee68f2cad982bcb">UART_FCR_FIFO_EN</a>;
<a name="l00831"></a>00831         <span class="keywordflow">switch</span> (FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#49b9769397e267360c6563a0f2596b94">FIFO_Level</a>){
<a name="l00832"></a>00832         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#ggd85d4333c1c346b3078d4abe95d4b2f731c04a9c2880b330633c41a16014a9d5">UART_FIFO_TRGLEV0</a>:
<a name="l00833"></a>00833                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#gba4b4e15936a075bf5054776fbd59676">UART_FCR_TRG_LEV0</a>;
<a name="l00834"></a>00834                 <span class="keywordflow">break</span>;
<a name="l00835"></a>00835         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#ggd85d4333c1c346b3078d4abe95d4b2f7ea4c7e4f74b82f0bd9b442d8c1d03809">UART_FIFO_TRGLEV1</a>:
<a name="l00836"></a>00836                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g264238c2dde9248a73d679c32a74004b">UART_FCR_TRG_LEV1</a>;
<a name="l00837"></a>00837                 <span class="keywordflow">break</span>;
<a name="l00838"></a>00838         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#ggd85d4333c1c346b3078d4abe95d4b2f7365bdb7edeb70b948cd269807e564999">UART_FIFO_TRGLEV2</a>:
<a name="l00839"></a>00839                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g7b655aba90b695210e7ce9f7b00cea89">UART_FCR_TRG_LEV2</a>;
<a name="l00840"></a>00840                 <span class="keywordflow">break</span>;
<a name="l00841"></a>00841         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#ggd85d4333c1c346b3078d4abe95d4b2f7bbfb98226ee6b9a20b5b91ffc8d46f1a">UART_FIFO_TRGLEV3</a>:
<a name="l00842"></a>00842         <span class="keywordflow">default</span>:
<a name="l00843"></a>00843                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g9e6ef12c7a1f3514d6e30d7548ed3e46">UART_FCR_TRG_LEV3</a>;
<a name="l00844"></a>00844                 <span class="keywordflow">break</span>;
<a name="l00845"></a>00845         }
<a name="l00846"></a>00846 
<a name="l00847"></a>00847         <span class="keywordflow">if</span> (FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#c909428aa3d1ea114a0dfeba23882d0f">FIFO_ResetTxBuf</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l00848"></a>00848         {
<a name="l00849"></a>00849                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g1c1a83fcacf333309330eea460d8a6a6">UART_FCR_TX_RS</a>;
<a name="l00850"></a>00850         }
<a name="l00851"></a>00851         <span class="keywordflow">if</span> (FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#54fb576adf7a8a796b5e276a5fb5c672">FIFO_ResetRxBuf</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l00852"></a>00852         {
<a name="l00853"></a>00853                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g246b37ccd6137c0bb51eb32760cb228e">UART_FCR_RX_RS</a>;
<a name="l00854"></a>00854         }
<a name="l00855"></a>00855         <span class="keywordflow">if</span> (FIFOCfg-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#6927af93232feb293135f57ebb962646">FIFO_DMAMode</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l00856"></a>00856         {
<a name="l00857"></a>00857                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g996e144f7d08cb36aa729f28d74b5801">UART_FCR_DMAMODE_SEL</a>;
<a name="l00858"></a>00858         }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 
<a name="l00861"></a>00861         <span class="comment">//write to FIFO control register</span>
<a name="l00862"></a>00862         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00863"></a>00863         {
<a name="l00864"></a>00864                 ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;<span class="comment">/*IIFCR.*/</span>FCR = tmp &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g2dd6b12c7c237b0a52c6a82698f85b04">UART_FCR_BITMASK</a>;
<a name="l00865"></a>00865         }
<a name="l00866"></a>00866         <span class="keywordflow">else</span>
<a name="l00867"></a>00867         {
<a name="l00868"></a>00868                 UARTx-&gt;<span class="comment">/*IIFCR.*/</span><a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#95da54034efc1b39c135d88cede37bfb">FCR</a> = tmp &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g2dd6b12c7c237b0a52c6a82698f85b04">UART_FCR_BITMASK</a>;
<a name="l00869"></a>00869         }
<a name="l00870"></a>00870 }
<a name="l00871"></a>00871 
<a name="l00872"></a>00872 <span class="comment">/*****************************************************************************/</span>
<a name="l00884"></a><a class="code" href="group___u_a_r_t___public___functions.html#g84c4e278cf63acef81e359b76d28319a">00884</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g84c4e278cf63acef81e359b76d28319a" title="Fills each UART_FIFOInitStruct member with its default value:FIFO_DMAMode = DISABLEFIFO_Level...">UART_FIFOConfigStructInit</a>(<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html" title="UART FIFO Configuration Structure definition.">UART_FIFO_CFG_Type</a> *UART_FIFOInitStruct)
<a name="l00885"></a>00885 {
<a name="l00886"></a>00886         UART_FIFOInitStruct-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#6927af93232feb293135f57ebb962646">FIFO_DMAMode</a> = <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>;
<a name="l00887"></a>00887         UART_FIFOInitStruct-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#49b9769397e267360c6563a0f2596b94">FIFO_Level</a> = <a class="code" href="group___u_a_r_t___public___types.html#ggd85d4333c1c346b3078d4abe95d4b2f731c04a9c2880b330633c41a16014a9d5">UART_FIFO_TRGLEV0</a>;
<a name="l00888"></a>00888         UART_FIFOInitStruct-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#54fb576adf7a8a796b5e276a5fb5c672">FIFO_ResetRxBuf</a> = <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>;
<a name="l00889"></a>00889         UART_FIFOInitStruct-&gt;<a class="code" href="struct_u_a_r_t___f_i_f_o___c_f_g___type.html#c909428aa3d1ea114a0dfeba23882d0f">FIFO_ResetTxBuf</a> = <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>;
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="comment">/*********************************************************************/</span>
<a name="l00910"></a><a class="code" href="group___u_a_r_t___public___functions.html#g51b07c8e7c54845841a97ec9a8d67c3b">00910</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g51b07c8e7c54845841a97ec9a8d67c3b" title="Start/Stop Auto Baudrate activity.">UART_ABCmd</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="struct_u_a_r_t___a_b___c_f_g___type.html" title="Auto Baudrate mode configuration type definition.">UART_AB_CFG_Type</a> *ABConfigStruct, \
<a name="l00911"></a>00911                                 <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l00912"></a>00912 {
<a name="l00913"></a>00913         uint32_t tmp;
<a name="l00914"></a>00914 
<a name="l00915"></a>00915         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00916"></a>00916         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(NewState));
<a name="l00917"></a>00917 
<a name="l00918"></a>00918         tmp = 0;
<a name="l00919"></a>00919         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>) {
<a name="l00920"></a>00920                 <span class="keywordflow">if</span> (ABConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___a_b___c_f_g___type.html#2fffb42b6e409a9ee1889580d37373af">ABMode</a> == <a class="code" href="group___u_a_r_t___public___types.html#gg0a6689108a4f3651d2188ea8a2c17d4ae7ac1b0008b5c99529b71d970969761f">UART_AUTOBAUD_MODE1</a>){
<a name="l00921"></a>00921                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g706e927ee7abf7027eb88b1e13dd2a92">UART_ACR_MODE</a>;
<a name="l00922"></a>00922                 }
<a name="l00923"></a>00923                 <span class="keywordflow">if</span> (ABConfigStruct-&gt;<a class="code" href="struct_u_a_r_t___a_b___c_f_g___type.html#d56a40fa003e79634b049caebe933e0a">AutoRestart</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>){
<a name="l00924"></a>00924                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g20674ae8e687d2161ef3fd88f2649036">UART_ACR_AUTO_RESTART</a>;
<a name="l00925"></a>00925                 }
<a name="l00926"></a>00926         }
<a name="l00927"></a>00927 
<a name="l00928"></a>00928         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00929"></a>00929         {
<a name="l00930"></a>00930                 <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l00931"></a>00931                 {
<a name="l00932"></a>00932                         <span class="comment">// Clear DLL and DLM value</span>
<a name="l00933"></a>00933                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR |= <a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>;
<a name="l00934"></a>00934                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;DLL = 0;
<a name="l00935"></a>00935                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;DLM = 0;
<a name="l00936"></a>00936                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;LCR &amp;= ~<a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>;
<a name="l00937"></a>00937                         <span class="comment">// FDR value must be reset to default value</span>
<a name="l00938"></a>00938                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;FDR = 0x10;
<a name="l00939"></a>00939                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;ACR = <a class="code" href="group___u_a_r_t___private___macros.html#gf6a6a4cb65edff2871ba48d3f2b445dc">UART_ACR_START</a> | tmp;
<a name="l00940"></a>00940                 }
<a name="l00941"></a>00941                 <span class="keywordflow">else</span>
<a name="l00942"></a>00942                 {
<a name="l00943"></a>00943                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;ACR = 0;
<a name="l00944"></a>00944                 }
<a name="l00945"></a>00945         }
<a name="l00946"></a>00946         <span class="keywordflow">else</span>
<a name="l00947"></a>00947         {
<a name="l00948"></a>00948                 <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l00949"></a>00949                 {
<a name="l00950"></a>00950                         <span class="comment">// Clear DLL and DLM value</span>
<a name="l00951"></a>00951                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>;
<a name="l00952"></a>00952                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#39198746ce75689ff1e0324d8e28afe5">DLL</a> = 0;
<a name="l00953"></a>00953                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#47c5741e71400b5fb574b7a9e109accc">DLM</a> = 0;
<a name="l00954"></a>00954                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> &amp;= ~<a class="code" href="group___u_a_r_t___private___macros.html#gae9c53e30321d4cac13137c66b022e9e">UART_LCR_DLAB_EN</a>;
<a name="l00955"></a>00955                         <span class="comment">// FDR value must be reset to default value</span>
<a name="l00956"></a>00956                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#616cc6e68c464708de180402999a93d6">FDR</a> = 0x10;
<a name="l00957"></a>00957                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9cb55206b29a8c16354747c556ab8bea">ACR</a> = <a class="code" href="group___u_a_r_t___private___macros.html#gf6a6a4cb65edff2871ba48d3f2b445dc">UART_ACR_START</a> | tmp;
<a name="l00958"></a>00958                 }
<a name="l00959"></a>00959                 <span class="keywordflow">else</span>
<a name="l00960"></a>00960                 {
<a name="l00961"></a>00961                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9cb55206b29a8c16354747c556ab8bea">ACR</a> = 0;
<a name="l00962"></a>00962                 }
<a name="l00963"></a>00963         }
<a name="l00964"></a>00964 }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 <span class="comment">/*********************************************************************/</span>
<a name="l00978"></a><a class="code" href="group___u_a_r_t___public___functions.html#g0c01f920210878891c8c10cb9620d5d6">00978</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g0c01f920210878891c8c10cb9620d5d6" title="Clear Autobaud Interrupt Pending.">UART_ABClearIntPending</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="group___u_a_r_t___public___types.html#g85f8df03cce76ca8e9404364a3b68487" title="UART End of Auto-baudrate type definition.">UART_ABEO_Type</a> ABIntType)
<a name="l00979"></a>00979 {
<a name="l00980"></a>00980         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l00981"></a>00981         <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l00982"></a>00982         {
<a name="l00983"></a>00983                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9cb55206b29a8c16354747c556ab8bea">ACR</a> |= ABIntType;
<a name="l00984"></a>00984         }
<a name="l00985"></a>00985         <span class="keywordflow">else</span>
<a name="l00986"></a>00986                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9cb55206b29a8c16354747c556ab8bea">ACR</a> |= ABIntType;
<a name="l00987"></a>00987 }
<a name="l00988"></a>00988 
<a name="l00989"></a>00989 <span class="comment">/*********************************************************************/</span>
<a name="l01001"></a><a class="code" href="group___u_a_r_t___public___functions.html#g3400356ef61d3735d9d10e04e0e95df4">01001</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g3400356ef61d3735d9d10e04e0e95df4" title="Enable/Disable transmission on UART TxD pin.">UART_TxCmd</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l01002"></a>01002 {
<a name="l01003"></a>01003         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g154a081172d66e30febec60c3833ca54">PARAM_UARTx</a>(UARTx));
<a name="l01004"></a>01004         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(NewState));
<a name="l01005"></a>01005 
<a name="l01006"></a>01006         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01007"></a>01007         {
<a name="l01008"></a>01008                 <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l01009"></a>01009                 {
<a name="l01010"></a>01010                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;TER |= <a class="code" href="group___u_a_r_t___private___macros.html#ga6e9b1099b787bb65c64d2e07d2fc3cf">UART_TER_TXEN</a>;
<a name="l01011"></a>01011                 }
<a name="l01012"></a>01012                 <span class="keywordflow">else</span>
<a name="l01013"></a>01013                 {
<a name="l01014"></a>01014                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#3a6e44664231b6cc96676c55a56d2e0c">TER</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#ga6e9b1099b787bb65c64d2e07d2fc3cf">UART_TER_TXEN</a>;
<a name="l01015"></a>01015                 }
<a name="l01016"></a>01016         }
<a name="l01017"></a>01017         <span class="keywordflow">else</span>
<a name="l01018"></a>01018         {
<a name="l01019"></a>01019                 <span class="keywordflow">if</span> (((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx) == LPC_UART1)
<a name="l01020"></a>01020                 {
<a name="l01021"></a>01021                         ((<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *)UARTx)-&gt;TER &amp;= (~<a class="code" href="group___u_a_r_t___private___macros.html#ga6e9b1099b787bb65c64d2e07d2fc3cf">UART_TER_TXEN</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g65bbbe4fecd3da46942b07267bf5cd32">UART_TER_BITMASK</a>;
<a name="l01022"></a>01022                 }
<a name="l01023"></a>01023                 <span class="keywordflow">else</span>
<a name="l01024"></a>01024                 {
<a name="l01025"></a>01025                         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#3a6e44664231b6cc96676c55a56d2e0c">TER</a> &amp;= (~<a class="code" href="group___u_a_r_t___private___macros.html#ga6e9b1099b787bb65c64d2e07d2fc3cf">UART_TER_TXEN</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g65bbbe4fecd3da46942b07267bf5cd32">UART_TER_BITMASK</a>;
<a name="l01026"></a>01026                 }
<a name="l01027"></a>01027         }
<a name="l01028"></a>01028 }
<a name="l01029"></a>01029 
<a name="l01030"></a>01030 <span class="comment">/* UART IrDA functions ---------------------------------------------------*/</span>
<a name="l01031"></a>01031 
<a name="l01032"></a>01032 <span class="preprocessor">#ifdef _UART3</span>
<a name="l01033"></a>01033 <span class="preprocessor"></span>
<a name="l01034"></a>01034 <span class="comment">/*********************************************************************/</span>
<a name="l01043"></a><a class="code" href="group___u_a_r_t___public___functions.html#gf124bd5ad22ea3060cbb388f76fdb3d7">01043</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#gf124bd5ad22ea3060cbb388f76fdb3d7" title="Enable or disable inverting serial input function of IrDA on UART peripheral.">UART_IrDAInvtInputCmd</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx, <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l01044"></a>01044 {
<a name="l01045"></a>01045         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g8af9d466136018be41f1d1280c11197a">PARAM_UART_IrDA</a>(UARTx));
<a name="l01046"></a>01046         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(NewState));
<a name="l01047"></a>01047 
<a name="l01048"></a>01048         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01049"></a>01049         {
<a name="l01050"></a>01050                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#748980d41e2145cd5cec0317ef4990c0">ICR</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#gbee5ba619dd3c8f28a7d2ec488614f06">UART_ICR_IRDAINV</a>;
<a name="l01051"></a>01051         }
<a name="l01052"></a>01052         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>)
<a name="l01053"></a>01053         {
<a name="l01054"></a>01054                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#748980d41e2145cd5cec0317ef4990c0">ICR</a> &amp;= (~<a class="code" href="group___u_a_r_t___private___macros.html#gbee5ba619dd3c8f28a7d2ec488614f06">UART_ICR_IRDAINV</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g822d618fad4a8a146fd8113f827b5d09">UART_ICR_BITMASK</a>;
<a name="l01055"></a>01055         }
<a name="l01056"></a>01056 }
<a name="l01057"></a>01057 
<a name="l01058"></a>01058 
<a name="l01059"></a>01059 <span class="comment">/*********************************************************************/</span>
<a name="l01067"></a><a class="code" href="group___u_a_r_t___public___functions.html#g4c946a4ac4dd32ea5644f78cebaccc85">01067</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g4c946a4ac4dd32ea5644f78cebaccc85" title="Enable or disable IrDA function on UART peripheral.">UART_IrDACmd</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a>* UARTx, <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l01068"></a>01068 {
<a name="l01069"></a>01069         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g8af9d466136018be41f1d1280c11197a">PARAM_UART_IrDA</a>(UARTx));
<a name="l01070"></a>01070         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(NewState));
<a name="l01071"></a>01071 
<a name="l01072"></a>01072         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01073"></a>01073         {
<a name="l01074"></a>01074                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#748980d41e2145cd5cec0317ef4990c0">ICR</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#g716e4830450b44e4f290e6c99879ba99">UART_ICR_IRDAEN</a>;
<a name="l01075"></a>01075         }
<a name="l01076"></a>01076         <span class="keywordflow">else</span>
<a name="l01077"></a>01077         {
<a name="l01078"></a>01078                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#748980d41e2145cd5cec0317ef4990c0">ICR</a> &amp;= (~<a class="code" href="group___u_a_r_t___private___macros.html#g716e4830450b44e4f290e6c99879ba99">UART_ICR_IRDAEN</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g822d618fad4a8a146fd8113f827b5d09">UART_ICR_BITMASK</a>;
<a name="l01079"></a>01079         }
<a name="l01080"></a>01080 }
<a name="l01081"></a>01081 
<a name="l01082"></a>01082 
<a name="l01083"></a>01083 <span class="comment">/*********************************************************************/</span>
<a name="l01099"></a><a class="code" href="group___u_a_r_t___public___functions.html#g066c5b2f961d138fd388be4edff883ad">01099</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g066c5b2f961d138fd388be4edff883ad" title="Configure Pulse divider for IrDA function on UART peripheral.">UART_IrDAPulseDivConfig</a>(<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *UARTx, <a class="code" href="group___u_a_r_t___public___types.html#g2e41fe7d668367ce455940f7dfde1d92">UART_IrDA_PULSE_Type</a> PulseDiv)
<a name="l01100"></a>01100 {
<a name="l01101"></a>01101         uint32_t tmp, tmp1;
<a name="l01102"></a>01102         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g8af9d466136018be41f1d1280c11197a">PARAM_UART_IrDA</a>(UARTx));
<a name="l01103"></a>01103         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g7e6f9366830e7a44be2008e1f2e03399">PARAM_UART_IrDA_PULSEDIV</a>(PulseDiv));
<a name="l01104"></a>01104 
<a name="l01105"></a>01105         tmp1 = <a class="code" href="group___u_a_r_t___private___macros.html#g2c4fd2b4e5050b400349138942bfb307">UART_ICR_PULSEDIV</a>(PulseDiv);
<a name="l01106"></a>01106         tmp = UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#748980d41e2145cd5cec0317ef4990c0">ICR</a> &amp; (~<a class="code" href="group___u_a_r_t___private___macros.html#g2c4fd2b4e5050b400349138942bfb307">UART_ICR_PULSEDIV</a>(7));
<a name="l01107"></a>01107         tmp |= tmp1 | <a class="code" href="group___u_a_r_t___private___macros.html#ge022dc3e5ad94f95d2805294d97594cd">UART_ICR_FIXPULSE_EN</a>;
<a name="l01108"></a>01108         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#748980d41e2145cd5cec0317ef4990c0">ICR</a> = tmp &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g822d618fad4a8a146fd8113f827b5d09">UART_ICR_BITMASK</a>;
<a name="l01109"></a>01109 }
<a name="l01110"></a>01110 
<a name="l01111"></a>01111 <span class="preprocessor">#endif</span>
<a name="l01112"></a>01112 <span class="preprocessor"></span>
<a name="l01113"></a>01113 
<a name="l01114"></a>01114 <span class="comment">/* UART1 FullModem function ---------------------------------------------*/</span>
<a name="l01115"></a>01115 
<a name="l01116"></a>01116 <span class="preprocessor">#ifdef _UART1</span>
<a name="l01117"></a>01117 <span class="preprocessor"></span>
<a name="l01118"></a>01118 <span class="comment">/*********************************************************************/</span>
<a name="l01129"></a><a class="code" href="group___u_a_r_t___public___functions.html#g5a21807b2f967d1ed1de7bd468cbd9ad">01129</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g5a21807b2f967d1ed1de7bd468cbd9ad" title="Force pin DTR/RTS corresponding to given state (Full modem mode).">UART_FullModemForcePinState</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, <a class="code" href="group___u_a_r_t___public___types.html#gbfc7ec239b7d598e6a2cc163e66b76fc" title="Modem output pin type definition.">UART_MODEM_PIN_Type</a> Pin, \
<a name="l01130"></a>01130                                                         <a class="code" href="group___u_a_r_t___public___types.html#gda493f726a4ea247b209b49fb8c85a52" title="UART1 Full modem - Signal states definition.">UART1_SignalState</a> NewState)
<a name="l01131"></a>01131 {
<a name="l01132"></a>01132         uint8_t tmp = 0;
<a name="l01133"></a>01133 
<a name="l01134"></a>01134         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g498a6ee60a8998e7d7c70951b599c520">PARAM_UART1_MODEM</a>(UARTx));
<a name="l01135"></a>01135         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#ge46654a5c2b0b2b3022c2633c4d12fc2">PARAM_UART1_MODEM_PIN</a>(Pin));
<a name="l01136"></a>01136         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g3d9adf3640fa108cc794e5edf140e95f">PARAM_UART1_SIGNALSTATE</a>(NewState));
<a name="l01137"></a>01137 
<a name="l01138"></a>01138         <span class="keywordflow">switch</span> (Pin){
<a name="l01139"></a>01139         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#ggbfc7ec239b7d598e6a2cc163e66b76fcc831b7aff6c92cfb78dab2a0bf6bd97c">UART1_MODEM_PIN_DTR</a>:
<a name="l01140"></a>01140                 tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g8ca301061bda466b0e62ff182938a19e">UART1_MCR_DTR_CTRL</a>;
<a name="l01141"></a>01141                 <span class="keywordflow">break</span>;
<a name="l01142"></a>01142         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#ggbfc7ec239b7d598e6a2cc163e66b76fcfb10c5304a783fa1d234d72a9d1ff056">UART1_MODEM_PIN_RTS</a>:
<a name="l01143"></a>01143                 tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g2e84ce056119e87adccff0b8cec560b1">UART1_MCR_RTS_CTRL</a>;
<a name="l01144"></a>01144                 <span class="keywordflow">break</span>;
<a name="l01145"></a>01145         <span class="keywordflow">default</span>:
<a name="l01146"></a>01146                 <span class="keywordflow">break</span>;
<a name="l01147"></a>01147         }
<a name="l01148"></a>01148 
<a name="l01149"></a>01149         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___u_a_r_t___public___types.html#ggda493f726a4ea247b209b49fb8c85a5233cf1d8ef1d06ee698a7fabf40eb3a7f">ACTIVE</a>){
<a name="l01150"></a>01150                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9e6decdff1ebf2d4adce6327cdf8193f">MCR</a> |= tmp;
<a name="l01151"></a>01151         } <span class="keywordflow">else</span> {
<a name="l01152"></a>01152                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9e6decdff1ebf2d4adce6327cdf8193f">MCR</a> &amp;= (~tmp) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#gfa1c3230af66a8c33f1febd18a1bf320">UART1_MCR_BITMASK</a>;
<a name="l01153"></a>01153         }
<a name="l01154"></a>01154 }
<a name="l01155"></a>01155 
<a name="l01156"></a>01156 
<a name="l01157"></a>01157 <span class="comment">/*********************************************************************/</span>
<a name="l01169"></a><a class="code" href="group___u_a_r_t___public___functions.html#gd65d361221a648575a5328ec1a243aa9">01169</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#gd65d361221a648575a5328ec1a243aa9" title="Configure Full Modem mode for UART peripheral.">UART_FullModemConfigMode</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, <a class="code" href="group___u_a_r_t___public___types.html#g55fc73bec4c58ad15d24b05095c4523a" title="UART Modem mode type definition.">UART_MODEM_MODE_Type</a> Mode, \
<a name="l01170"></a>01170                                                         <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l01171"></a>01171 {
<a name="l01172"></a>01172         uint8_t tmp;
<a name="l01173"></a>01173 
<a name="l01174"></a>01174         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g498a6ee60a8998e7d7c70951b599c520">PARAM_UART1_MODEM</a>(UARTx));
<a name="l01175"></a>01175         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g0e22549db0a3e5945249b23ae87eebbf">PARAM_UART1_MODEM_MODE</a>(Mode));
<a name="l01176"></a>01176         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(NewState));
<a name="l01177"></a>01177 
<a name="l01178"></a>01178         <span class="keywordflow">switch</span>(Mode){
<a name="l01179"></a>01179         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg55fc73bec4c58ad15d24b05095c4523a0c1c7817a58775f439acb102614f350b">UART1_MODEM_MODE_LOOPBACK</a>:
<a name="l01180"></a>01180                 tmp = <a class="code" href="group___u_a_r_t___private___macros.html#g2c22f6069fc2d3d621cd8b2e578d69a3">UART1_MCR_LOOPB_EN</a>;
<a name="l01181"></a>01181                 <span class="keywordflow">break</span>;
<a name="l01182"></a>01182         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg55fc73bec4c58ad15d24b05095c4523a7e6608f4e3b1a68f463d3dfbfbf2f09d">UART1_MODEM_MODE_AUTO_RTS</a>:
<a name="l01183"></a>01183                 tmp = <a class="code" href="group___u_a_r_t___private___macros.html#gfe3631c1413e045686f07f3716e0baed">UART1_MCR_AUTO_RTS_EN</a>;
<a name="l01184"></a>01184                 <span class="keywordflow">break</span>;
<a name="l01185"></a>01185         <span class="keywordflow">case</span> <a class="code" href="group___u_a_r_t___public___types.html#gg55fc73bec4c58ad15d24b05095c4523aa290490ac4ee52b4fd0d2a89b038ac0e">UART1_MODEM_MODE_AUTO_CTS</a>:
<a name="l01186"></a>01186                 tmp = <a class="code" href="group___u_a_r_t___private___macros.html#gc7f7f4cc9428e643c0bb4058e7fcb022">UART1_MCR_AUTO_CTS_EN</a>;
<a name="l01187"></a>01187                 <span class="keywordflow">break</span>;
<a name="l01188"></a>01188         <span class="keywordflow">default</span>:
<a name="l01189"></a>01189                 <span class="keywordflow">break</span>;
<a name="l01190"></a>01190         }
<a name="l01191"></a>01191 
<a name="l01192"></a>01192         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01193"></a>01193         {
<a name="l01194"></a>01194                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9e6decdff1ebf2d4adce6327cdf8193f">MCR</a> |= tmp;
<a name="l01195"></a>01195         }
<a name="l01196"></a>01196         <span class="keywordflow">else</span>
<a name="l01197"></a>01197         {
<a name="l01198"></a>01198                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#9e6decdff1ebf2d4adce6327cdf8193f">MCR</a> &amp;= (~tmp) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#gfa1c3230af66a8c33f1febd18a1bf320">UART1_MCR_BITMASK</a>;
<a name="l01199"></a>01199         }
<a name="l01200"></a>01200 }
<a name="l01201"></a>01201 
<a name="l01202"></a>01202 
<a name="l01203"></a>01203 <span class="comment">/*********************************************************************/</span>
<a name="l01215"></a><a class="code" href="group___u_a_r_t___public___functions.html#gee50c6ea6e2ccfa7cc6edceee5833d1e">01215</a> uint8_t <a class="code" href="group___u_a_r_t___public___functions.html#gee50c6ea6e2ccfa7cc6edceee5833d1e" title="Get current status of modem status register.">UART_FullModemGetStatus</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx)
<a name="l01216"></a>01216 {
<a name="l01217"></a>01217         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g498a6ee60a8998e7d7c70951b599c520">PARAM_UART1_MODEM</a>(UARTx));
<a name="l01218"></a>01218         <span class="keywordflow">return</span> ((UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#44aa30719cf42323b8e5e5ab15b5b5e3">MSR</a>) &amp; <a class="code" href="group___u_a_r_t___private___macros.html#ga25ca1b2a81d8ee9d9aad9cafdd04668">UART1_MSR_BITMASK</a>);
<a name="l01219"></a>01219 }
<a name="l01220"></a>01220 
<a name="l01221"></a>01221 
<a name="l01222"></a>01222 <span class="comment">/* UART RS485 functions --------------------------------------------------------------*/</span>
<a name="l01223"></a>01223 
<a name="l01224"></a>01224 <span class="comment">/*********************************************************************/</span>
<a name="l01233"></a><a class="code" href="group___u_a_r_t___public___functions.html#g61acf8ebde89ef2b8c05c2d2a9ac9e7c">01233</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g61acf8ebde89ef2b8c05c2d2a9ac9e7c" title="Configure UART peripheral in RS485 mode according to the specified parameters in...">UART_RS485Config</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, <a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html" title="UART1 Full modem - RS485 Control configuration type.">UART1_RS485_CTRLCFG_Type</a> *RS485ConfigStruct)
<a name="l01234"></a>01234 {
<a name="l01235"></a>01235         uint32_t tmp;
<a name="l01236"></a>01236 
<a name="l01237"></a>01237         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g498a6ee60a8998e7d7c70951b599c520">PARAM_UART1_MODEM</a>(UARTx));
<a name="l01238"></a>01238         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#21fae19066723ed56184d3ddcaa471b4">AutoAddrDetect_State</a>));
<a name="l01239"></a>01239         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#6fafd5c487d7ef59dccf319bf2969f53">AutoDirCtrl_State</a>));
<a name="l01240"></a>01240         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g412ed900bb9130582236c4402ef5b501">PARAM_UART1_RS485_CFG_DELAYVALUE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#94ba70cceecbccd67e35bb4241bf18e2">DelayValue</a>));
<a name="l01241"></a>01241         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#gfb6827323e4c501477936a84bd733b4f">PARAM_SETSTATE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#191e93a38fbb05ebf2372c7eb5ed023f">DirCtrlPol_Level</a>));
<a name="l01242"></a>01242         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g32e9aa7d2b33ee9fe74da664e2359b64">PARAM_UART_RS485_DIRCTRL_PIN</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#2aa2eb68d4d4a11af347425d4fdf888c">DirCtrlPin</a>));
<a name="l01243"></a>01243         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___u_a_r_t___private___macros.html#g3d303c3150afe21e6b740f0a06c5d689">PARAM_UART1_RS485_CFG_MATCHADDRVALUE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#d8f6b63563b285dc7ff26f203a6e3281">MatchAddrValue</a>));
<a name="l01244"></a>01244         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#3c81a936752affaec48053ec733740cb">NormalMultiDropMode_State</a>));
<a name="l01245"></a>01245         <a class="code" href="group___l_i_b_c_f_g___d_e_f_a_u_l_t___public___macros.html#g9d8414ced01feedb3238e5ffb3c1961f">CHECK_PARAM</a>(<a class="code" href="group___l_p_c___types___public___types.html#g5475435ea985fe5abbf2048e87e3e682">PARAM_FUNCTIONALSTATE</a>(RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#6bf2d07a4c40a238a118c1409e8b21c5">Rx_State</a>));
<a name="l01246"></a>01246 
<a name="l01247"></a>01247         tmp = 0;
<a name="l01248"></a>01248         <span class="comment">// If Auto Direction Control is enabled -  This function is used in Master mode</span>
<a name="l01249"></a>01249         <span class="keywordflow">if</span> (RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#6fafd5c487d7ef59dccf319bf2969f53">AutoDirCtrl_State</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01250"></a>01250         {
<a name="l01251"></a>01251                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g4fc9e8ce0ea18bc5ae717d3d00ec02eb">UART1_RS485CTRL_DCTRL_EN</a>;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253                 <span class="comment">// Set polar</span>
<a name="l01254"></a>01254                 <span class="keywordflow">if</span> (RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#191e93a38fbb05ebf2372c7eb5ed023f">DirCtrlPol_Level</a> == <a class="code" href="group___l_p_c___types___public___types.html#gg89136caac2e14c55151f527ac02daaffb44c8101cc294c074709ec1b14211792">SET</a>)
<a name="l01255"></a>01255                 {
<a name="l01256"></a>01256                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g576582c10c8fc016f90b548a45e565a7">UART1_RS485CTRL_OINV_1</a>;
<a name="l01257"></a>01257                 }
<a name="l01258"></a>01258 
<a name="l01259"></a>01259                 <span class="comment">// Set pin according to</span>
<a name="l01260"></a>01260                 <span class="keywordflow">if</span> (RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#2aa2eb68d4d4a11af347425d4fdf888c">DirCtrlPin</a> == <a class="code" href="group___u_a_r_t___public___types.html#ggbcfaaf12f325112107ff9b5c5cf1120cd58cd4cd834d89b139816c0cd3138582">UART1_RS485_DIRCTRL_DTR</a>)
<a name="l01261"></a>01261                 {
<a name="l01262"></a>01262                         tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#gcb179ac97fb8aacbea2cf116bc671477">UART1_RS485CTRL_SEL_DTR</a>;
<a name="l01263"></a>01263                 }
<a name="l01264"></a>01264 
<a name="l01265"></a>01265                 <span class="comment">// Fill delay time</span>
<a name="l01266"></a>01266                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#6005fde5e3871d453bf2a988bb00d998">RS485DLY</a> = RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#94ba70cceecbccd67e35bb4241bf18e2">DelayValue</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g0c75389e18ebd47c99cac42f7b6bee09">UART1_RS485DLY_BITMASK</a>;
<a name="l01267"></a>01267         }
<a name="l01268"></a>01268 
<a name="l01269"></a>01269         <span class="comment">// MultiDrop mode is enable</span>
<a name="l01270"></a>01270         <span class="keywordflow">if</span> (RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#3c81a936752affaec48053ec733740cb">NormalMultiDropMode_State</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01271"></a>01271         {
<a name="l01272"></a>01272                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#g17e0186d392ae4cab45b95b94b325af9">UART1_RS485CTRL_NMM_EN</a>;
<a name="l01273"></a>01273         }
<a name="l01274"></a>01274 
<a name="l01275"></a>01275         <span class="comment">// Auto Address Detect function</span>
<a name="l01276"></a>01276         <span class="keywordflow">if</span> (RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#21fae19066723ed56184d3ddcaa471b4">AutoAddrDetect_State</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>)
<a name="l01277"></a>01277         {
<a name="l01278"></a>01278                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#gcf6b20c310ad50b23669afbc56f0f005">UART1_RS485CTRL_AADEN</a>;
<a name="l01279"></a>01279                 <span class="comment">// Fill Match Address</span>
<a name="l01280"></a>01280                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#86dcb8021522f682ba87ce1290250768">ADRMATCH</a> = RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#d8f6b63563b285dc7ff26f203a6e3281">MatchAddrValue</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g11af35ea993b841f116337dde36aeaa9">UART1_RS485ADRMATCH_BITMASK</a>;
<a name="l01281"></a>01281         }
<a name="l01282"></a>01282 
<a name="l01283"></a>01283 
<a name="l01284"></a>01284         <span class="comment">// Receiver is disable</span>
<a name="l01285"></a>01285         <span class="keywordflow">if</span> (RS485ConfigStruct-&gt;<a class="code" href="struct_u_a_r_t1___r_s485___c_t_r_l_c_f_g___type.html#6bf2d07a4c40a238a118c1409e8b21c5">Rx_State</a> == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba1d3a9df141be0ccf10389b640f492b26d">DISABLE</a>)
<a name="l01286"></a>01286         {
<a name="l01287"></a>01287                 tmp |= <a class="code" href="group___u_a_r_t___private___macros.html#gd46c85dd9ed07459a63a886052e53404">UART1_RS485CTRL_RX_DIS</a>;
<a name="l01288"></a>01288         }
<a name="l01289"></a>01289 
<a name="l01290"></a>01290         <span class="comment">// write back to RS485 control register</span>
<a name="l01291"></a>01291         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#7f8d8c4207df40830170e6d6e3cc2b01">RS485CTRL</a> = tmp &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g0ac8cbd1ed106b8867caf9d127d0eca2">UART1_RS485CTRL_BITMASK</a>;
<a name="l01292"></a>01292 
<a name="l01293"></a>01293         <span class="comment">// Enable Parity function and leave parity in stick '0' parity as default</span>
<a name="l01294"></a>01294         UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> |= (<a class="code" href="group___u_a_r_t___private___macros.html#ga5d9db8e53dae40ddaa70204fa1b60a3">UART_LCR_PARITY_F_0</a> | <a class="code" href="group___u_a_r_t___private___macros.html#g4fba4b3d639bdfa713d12466d411f57c">UART_LCR_PARITY_EN</a>);
<a name="l01295"></a>01295 }
<a name="l01296"></a>01296 
<a name="l01297"></a>01297 <span class="comment">/*********************************************************************/</span>
<a name="l01305"></a><a class="code" href="group___u_a_r_t___public___functions.html#g8c43ccaa9104baab28df1b0afe57a195">01305</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g8c43ccaa9104baab28df1b0afe57a195" title="Enable/Disable receiver in RS485 module in UART1.">UART_RS485ReceiverCmd</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, <a class="code" href="group___l_p_c___types___public___types.html#gc9a7e9a35d2513ec15c3b537aaa4fba1" title="Functional State Definition.">FunctionalState</a> NewState)
<a name="l01306"></a>01306 {
<a name="l01307"></a>01307         <span class="keywordflow">if</span> (NewState == <a class="code" href="group___l_p_c___types___public___types.html#ggc9a7e9a35d2513ec15c3b537aaa4fba17d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>){
<a name="l01308"></a>01308                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#7f8d8c4207df40830170e6d6e3cc2b01">RS485CTRL</a> &amp;= ~<a class="code" href="group___u_a_r_t___private___macros.html#gd46c85dd9ed07459a63a886052e53404">UART1_RS485CTRL_RX_DIS</a>;
<a name="l01309"></a>01309         } <span class="keywordflow">else</span> {
<a name="l01310"></a>01310                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#7f8d8c4207df40830170e6d6e3cc2b01">RS485CTRL</a> |= <a class="code" href="group___u_a_r_t___private___macros.html#gd46c85dd9ed07459a63a886052e53404">UART1_RS485CTRL_RX_DIS</a>;
<a name="l01311"></a>01311         }
<a name="l01312"></a>01312 }
<a name="l01313"></a>01313 
<a name="l01314"></a>01314 <span class="comment">/*********************************************************************/</span>
<a name="l01322"></a><a class="code" href="group___u_a_r_t___public___functions.html#g97ffe96cc1288cfeff4acc498ca3088a">01322</a> uint32_t <a class="code" href="group___u_a_r_t___public___functions.html#g97ffe96cc1288cfeff4acc498ca3088a" title="Send data on RS485 bus with specified parity stick value (9-bit mode).">UART_RS485Send</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, uint8_t *pDatFrm, \
<a name="l01323"></a>01323                                         uint32_t size, uint8_t ParityStick)
<a name="l01324"></a>01324 {
<a name="l01325"></a>01325         uint8_t tmp, save;
<a name="l01326"></a>01326         uint32_t cnt;
<a name="l01327"></a>01327 
<a name="l01328"></a>01328         <span class="keywordflow">if</span> (ParityStick){
<a name="l01329"></a>01329                 save = tmp = UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#g28e31fe85eeeb124ff6a471978155356">UART_LCR_BITMASK</a>;
<a name="l01330"></a>01330                 tmp &amp;= ~(<a class="code" href="group___u_a_r_t___private___macros.html#g48df31af63d9e3a65b13a32880bb0b36">UART_LCR_PARITY_EVEN</a>);
<a name="l01331"></a>01331                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> = tmp;
<a name="l01332"></a>01332                 cnt = <a class="code" href="group___u_a_r_t___public___functions.html#gdeb1a6a95247931abb93fa49571ae51c" title="Send a block of data via UART peripheral.">UART_Send</a>((<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *)UARTx, pDatFrm, size, <a class="code" href="group___l_p_c___types___public___types.html#ggddb88bff95842be0c54e0e979f45cf95854a1cd6e3a98db9e290dddea29725e7">BLOCKING</a>);
<a name="l01333"></a>01333                 <span class="keywordflow">while</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#gdb3f8bb82f0a253700fdb88d8c609710">UART_LSR_TEMT</a>));
<a name="l01334"></a>01334                 UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#5f855de5ad502ecb09ae4a038feb4d5f">LCR</a> = save;
<a name="l01335"></a>01335         } <span class="keywordflow">else</span> {
<a name="l01336"></a>01336                 cnt = <a class="code" href="group___u_a_r_t___public___functions.html#gdeb1a6a95247931abb93fa49571ae51c" title="Send a block of data via UART peripheral.">UART_Send</a>((<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html" title="Universal Asynchronous Receiver Transmitter (UART) register structure definition...">LPC_UART_TypeDef</a> *)UARTx, pDatFrm, size, <a class="code" href="group___l_p_c___types___public___types.html#ggddb88bff95842be0c54e0e979f45cf95854a1cd6e3a98db9e290dddea29725e7">BLOCKING</a>);
<a name="l01337"></a>01337                 <span class="keywordflow">while</span> (!(UARTx-&gt;<a class="code" href="struct_l_p_c___u_a_r_t___type_def.html#573615f4a61289f083173114b3dac919">LSR</a> &amp; <a class="code" href="group___u_a_r_t___private___macros.html#gdb3f8bb82f0a253700fdb88d8c609710">UART_LSR_TEMT</a>));
<a name="l01338"></a>01338         }
<a name="l01339"></a>01339         <span class="keywordflow">return</span> cnt;
<a name="l01340"></a>01340 }
<a name="l01341"></a>01341 
<a name="l01342"></a>01342 <span class="comment">/*********************************************************************/</span>
<a name="l01348"></a><a class="code" href="group___u_a_r_t___public___functions.html#g51d8e73f086bb57478966b6b699404d8">01348</a> <span class="keywordtype">void</span> <a class="code" href="group___u_a_r_t___public___functions.html#g51d8e73f086bb57478966b6b699404d8" title="Send Slave address frames on RS485 bus.">UART_RS485SendSlvAddr</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, uint8_t SlvAddr)
<a name="l01349"></a>01349 {
<a name="l01350"></a>01350         <a class="code" href="group___u_a_r_t___public___functions.html#g97ffe96cc1288cfeff4acc498ca3088a" title="Send data on RS485 bus with specified parity stick value (9-bit mode).">UART_RS485Send</a>(UARTx, &amp;SlvAddr, 1, 1);
<a name="l01351"></a>01351 }
<a name="l01352"></a>01352 
<a name="l01353"></a>01353 <span class="comment">/*********************************************************************/</span>
<a name="l01360"></a><a class="code" href="group___u_a_r_t___public___functions.html#g97fc6a99efa2983668cf2d18c5ff7536">01360</a> uint32_t <a class="code" href="group___u_a_r_t___public___functions.html#g97fc6a99efa2983668cf2d18c5ff7536" title="Send Data frames on RS485 bus.">UART_RS485SendData</a>(<a class="code" href="struct_l_p_c___u_a_r_t1___type_def.html" title="Universal Asynchronous Receiver Transmitter 1 (UART1) register structure definition...">LPC_UART1_TypeDef</a> *UARTx, uint8_t *pData, uint32_t size)
<a name="l01361"></a>01361 {
<a name="l01362"></a>01362         <span class="keywordflow">return</span> (<a class="code" href="group___u_a_r_t___public___functions.html#g97ffe96cc1288cfeff4acc498ca3088a" title="Send data on RS485 bus with specified parity stick value (9-bit mode).">UART_RS485Send</a>(UARTx, pData, size, 0));
<a name="l01363"></a>01363 }
<a name="l01364"></a>01364 
<a name="l01365"></a>01365 <span class="preprocessor">#endif </span><span class="comment">/* _UART1 */</span>
<a name="l01366"></a>01366 
<a name="l01367"></a>01367 <span class="preprocessor">#endif </span><span class="comment">/* _UART */</span>
<a name="l01368"></a>01368 
<a name="l01376"></a>01376 <span class="comment">/* --------------------------------- End Of File ------------------------------ */</span>
<a name="l01377"></a>01377 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jun 7 14:58:56 2011 for LPC1700CMSIS Standard Peripheral Firmware Library Manual by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
